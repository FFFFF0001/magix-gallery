define("mx-tree/branch",["magix","$","./branch"],(e,i,t)=>{e("./branch");let a=e("magix"),l=e("$"),_=a.Vframe;t.exports=a.View.extend({tmpl:{html:'<ul mx-guid="g0">1</ul>',subs:[{keys:["list","fromTop","valueKey","textKey"],path:'ul[mx-guid="g0"]',tmpl:'<%for(var _=0,a;_<$$.list.length;_++){a=$$.list[_]%><li class="_fz<%if(!_&&$$.fromTop){%> _fF<%}if(_==$$.list.length-1){%> _fE<%}%>"><div class="_fA<%if(a.children){%> _ad<%}%>" <%if(a.children){%> mx-click="__ax({id:\'<%=$eq(a[$$.valueKey])%>\'})" <%}%>><%if(a.children){%><span class="_fB">+</span><%}%></div><div class="_fC"><label class="_fD"><input class="_as _fH _aa" type="checkbox" mx-change="__fO()" id="cb_<%=$$.id%>_<%=a[$$.valueKey]%>" value="<%=a[$$.valueKey]%>" name="<%=$$.id%>"><span class="_ac _fG _aa"><%=a[$$.textKey]%></span></label></div><%if(a.children){%><div id="<%=$$.id%>_<%=a[$$.valueKey]%>" class="_fy _ah" mx-view="mx-tree/branch?textKey=<%!$eu($$.textKey)%>&valueKey=<%!$eu($$.valueKey)%>&list=<%@a.children%>"></div><%}%></li><%}%>',s:"1"}]},init(e){this.updater.set(e)},render(){this.updater.digest({id:this.id})},__gh(){let e,i,t=this.id;return l("#"+t+' input[name="'+t+'"]').each((t,a)=>{a.indeterminate?e=i=!0:a.checked?e=!0:i=!0}),e&&i?3:e?2:1},__gi(e){let i=this.owner.parent(),t=0;if(i){let a=i.children();for(let e of a){let i=_.get(e);i&&(t|=i.invoke("__gh"))}let n=l("#cb_"+e);3===t?n.prop("indeterminate",!0):(n.prop("indeterminate",!1),n.prop("checked",2==t)),i.invoke("__gi",[i.id])}},__ce(e){let i=this.id;l("#"+i+' input[name="'+i+'"]').prop("indeterminate",!1).prop("checked",e);let t=this.owner.children();for(let i of t){let t=_.get(i);t&&t.invoke("__ce",[e])}},"__ax<click>"(e){let i=l("#"+this.id+"_"+e.params.id),t=l(e.eventTarget).find("span");"+"==l.trim(t.html())?(i.slideDown(),t.html("-")):(i.slideUp(),t.html("+"))},"__fO<change>"(e){let i=_.get(this.id+"_"+e.eventTarget.value);i&&i.invoke("__ce",[e.eventTarget.checked]),this.__gi(this.id)}})});
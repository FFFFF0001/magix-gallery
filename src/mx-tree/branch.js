define("mx-tree/branch",["magix","$","./branch"],function(e,i,t){e("./branch");var a=e("magix"),l=e("$");t.exports=a.View.extend({tmpl:{html:'<ul mx-guid="g0">1</ul>',subs:[{keys:["list","fromTop","valueKey","textKey","id"],path:'ul[mx-guid="g0"]',tmpl:'<%for(var a=0,b;a<$$.list.length;a++){b=$$.list[a]%><li class="fH<%if(!a&&$$.fromTop){%> fN<%}if(a==$$.list.length-1){%> fM<%}%>"><div class="fI<%if(b.children){%> ab<%}%>" <%if(b.children){%> mx-click="__bM({id:\'<%=$eq(b[$$.valueKey])%>\'})" <%}%>><%if(b.children){%><span class="fJ">+</span><%}%></div><div class="fK"><label class="fL"><input class="h aq" type="checkbox" mx-change="__fq()" value="<%=b[$$.valueKey]%>"><%=b[$$.textKey]%></label></div><%if(b.children){%><div mx-view="mx-tree/branch?textKey=<%!$eu($$.textKey)%>&list=<%@b.children%>" vuew-value-key="<%=$$.valueKey%>" id="<%=$$.id%>_<%=b[$$.valueKey]%>" class="fG af"></div><%}%></li><%}%>',s:"1"}]},init:function(e){this.updater.set(e)},render:function(){var e=this;e.updater.digest({id:e.id})},checkAll:function(e){l("#"+this.id+' input[type="checkbox"]').prop("checked",e)},"__bM<click>":function(e){var i=l("#"+this.id+"_"+e.params.id),t=l(e.eventTarget).find("span");"+"==l.trim(t.html())?(i.slideDown(),t.html("-")):(i.slideUp(),t.html("+"))},"__fq<change>":function(e){var i=this,t=a.Vframe.get(i.id+"_"+e.eventTarget.value);t&&t.invoke("checkAll",[e.eventTarget.checked])}})});
/*
    generate by magix-combine@3.7.4: https://github.com/thx/magix-combine
    author: kooboy_li@163.com
    loader: cmd_es
 */
define('mx-dragsort/__test__/index',["magix","../index"],(require,exports,module)=>{
/*Magix*/
require("../index");
/*
ver:1.3.8
*/
/*
    author:xinglie.lkf@alibaba-inc.com
 */
let Magix = require('magix');
Magix.applyStyle("__mx-dragsort___test___index_",".__mx-dragsort___test___index_-left {\n  width: 300px;\n  cursor: default;\n}\n.__mx-dragsort___test___index_-left li {\n  line-height: 30px;\n  padding: 10px;\n}\n.__mx-dragsort___test___index_-left li:nth-child(odd) {\n  background-color: rgba(172, 236, 182, 0.5);\n}\n.__mx-dragsort___test___index_-left span {\n  cursor: move;\n  margin-right: 10px;\n  display: inline-block;\n  height: 100%;\n}\n.__mx-dragsort___test___index_-left1 {\n  background: #F8F6F6;\n  cursor: default;\n  height: 120px;\n  overflow: auto;\n  width: 200px;\n}\n.__mx-dragsort___test___index_-hor {\n  width: 100%;\n  cursor: default;\n}\n.__mx-dragsort___test___index_-hor li {\n  width: 100px;\n  height: 60px;\n  text-align: center;\n  float: left;\n  line-height: 60px;\n  background: #F8F6F6;\n  border-right: 1px solid #fff;\n}\n.__mx-dragsort___test___index_-hor li[ds-draggable=\"false\"] {\n  background: #ccc;\n}\n");
module.exports = Magix.View.extend({
    tmpl: {"html":"<h2>mx-dragsort</h2><h3>默认示例</h3><div class=\"__mx-style_index_-pt20 __mx-style_index_-clearfix\"><ul mx-view=\"mx-dragsort/index?selector=span\" class=\"__mx-dragsort___test___index_-left __mx-style_index_-fl\"><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li></ul><div class=\"__mx-style_index_-fr\"><table class=\"__mx-style_index_-table __mx-style_index_-table-striped\"><thead><tr><th><input type=\"checkbox\" class=\"__mx-style_index_-checkbox\" linkage=\"example1\"></th><%for(var i=0;i<3;i++){%><th>示例字段<%=i%></th><%}%></tr></thead><tbody mx-view=\"mx-dragsort/index\"><%for(var i=0;i<10;i++){%><tr><td><input type=\"checkbox\" class=\"__mx-style_index_-checkbox\" linkage-parent=\"example1\" value=\"ex1_<%=i%>\"></td><%for(var j=0;j<3;j++){%><td><%=i%>示例字段内容<%=j%></td><%}%></tr><%}%></tbody></table></div></div><div class=\"__mx-style_index_-pt20\"><div>HTML Code:</div><pre>&lt;ul mx-view=\"app/gallery/mx-dragsort/index\" class=\"left fl\" view-selector=\"span\"&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n&lt;/ul&gt;\n&lt;div class=\"fr\"&gt;\n    &lt;table class=\"table table-striped\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;&lt;input type=\"checkbox\" class=\"checkbox\" linkage=\"example1\" /&gt;&lt;/th&gt;\n                &lt;%for(var i=0;i&lt;5;i++){%&gt;\n                &lt;th&gt;示例字段&lt;%=i%&gt;&lt;/th&gt;\n                &lt;%}%&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody mx-view=\"app/gallery/mx-dragsort/index\"&gt;\n            &lt;%for(var i=0;i&lt;10;i++){%&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;input type=\"checkbox\" class=\"checkbox\" linkage-parent=\"example1\" value=\"ex1_&lt;%=i%&gt;\" /&gt;&lt;/td&gt;\n                &lt;%for(var j=0;j&lt;5;j++){%&gt;\n                &lt;td&gt;&lt;%=i%&gt;示例字段内容&lt;%=j%&gt;&lt;/td&gt;\n                &lt;%}%&gt;\n            &lt;/tr&gt;\n            &lt;%}%&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/div&gt;</pre></div><h3 class=\"__mx-style_index_-mt30\">水平拖动</h3><div class=\"__mx-style_index_-pt20 __mx-style_index_-clearfix\"><ul mx-view=\"mx-dragsort/index?horizonal=true&vertical=false\" class=\"__mx-dragsort___test___index_-hor __mx-style_index_-fl\"><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li></ul></div><div class=\"__mx-style_index_-pt20\"><div>HTML Code:</div><pre>&lt;ul mx-view=\"app/gallery/mx-dragsort/index\" class=\"hor fl\" view-horizonal=\"true\" view-vertical=\"false\"&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n&lt;/ul&gt;</pre></div><h3 class=\"__mx-style_index_-mt30\">四个方向</h3><div class=\"__mx-style_index_-pt20 __mx-style_index_-clearfix\"><ul mx-view=\"mx-dragsort/index?horizonal=true&vertical=true\" class=\"__mx-dragsort___test___index_-hor __mx-style_index_-fl\"><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li></ul></div><div class=\"__mx-style_index_-pt20\"><div>HTML Code:</div><pre>&lt;ul mx-view=\"app/gallery/mx-dragsort/index\" class=\"hor fl\" view-horizonal=\"true\" view-vertical=\"true\"&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n&lt;/ul&gt;</pre></div><h3 class=\"__mx-style_index_-mt30\">滚动容器和窗口</h3><h4>拖动的容器节点如果可以滚动，则会自动滚动，如果拖动靠近窗口，则会自动滚动窗口</h4><div class=\"__mx-style_index_-pt20 __mx-style_index_-clearfix\"><ul mx-view=\"mx-dragsort/index?selector=span\" class=\"__mx-dragsort___test___index_-left __mx-dragsort___test___index_-left1 __mx-style_index_-fl __mx-style_index_-scrollable\"><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li></ul></div><h3 class=\"__mx-style_index_-mt30\">跨容器拖动</h3><div class=\"__mx-style_index_-pt20 __mx-style_index_-clearfix\"><ul mx-view=\"mx-dragsort/index?drops=_def&selector=span\" class=\"__mx-dragsort___test___index_-left __mx-dragsort___test___index_-left1 __mx-style_index_-fl __mx-style_index_-scrollable\" id=\"_abc\"><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li></ul><ul mx-view=\"mx-dragsort/index?selector=span&drops=_abc\" class=\"__mx-dragsort___test___index_-left __mx-dragsort___test___index_-left1 __mx-style_index_-fl __mx-style_index_-scrollable __mx-style_index_-ml30\" id=\"_def\"></ul></div><div class=\"__mx-style_index_-pt20\"><div>HTML Code:</div><pre>&lt;ul mx-view=\"app/gallery/mx-dragsort/index\" class=\"left left1 fl scrollable\" view-drops=\"_def\" view-selector=\"span\" id=\"_abc\"&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ul mx-view=\"mx-dragsort/index\" class=\"left left1 fl scrollable ml30\" id=\"_def\" view-selector=\"span\" view-drops=\"_abc\"&gt;\n&lt;/ul&gt;</pre></div><h3 class=\"__mx-style_index_-mt30\">拖出容器删除</h3><div class=\"__mx-style_index_-pt20 __mx-style_index_-clearfix\"><ul mx-view=\"mx-dragsort/index?sort=false\" class=\"__mx-dragsort___test___index_-left __mx-dragsort___test___index_-left1 __mx-style_index_-fl __mx-style_index_-scrollable\" mx-enterzone=\"\u001f\u001estop()\" mx-leavezone=\"\u001f\u001eok()\" mx-dragfinish=\"\u001f\u001edel()\"><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li></ul></div><div class=\"__mx-style_index_-pt20\"><div>HTML Code:</div><pre>&lt;ul mx-view=\"app/gallery/mx-dragsort/index\" class=\"left left1 fl scrollable\" mx-enterzone=\"stop()\" mx-leavezone=\"ok()\" mx-dragfinish=\"del()\" view-sort=\"false\"&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n&lt;/ul&gt;</pre><div class=\"__mx-style_index_-pt10\">Javascript Code:</div><pre>let Magix = require('magix');\nMagix.applyStyle('@index.less');\nmodule.exports = Magix.View.extend({\n    tmpl: '@index.html',\n    render() {\n        let me = this;\n        me.updater.digest();\n    },\n    'stop&lt;enterzone&gt;'(e) {\n        e.changePointer(false);\n    },\n    'ok&lt;leavezone&gt;'(e) {\n        e.changePointer(true);\n    },\n    'del&lt;dragfinish&gt;'(e) {\n        if (e.moved && e.outZone) {//moved and outside zone\n            $(e.dragNode).slideUp();\n            setTimeout(() => {\n                e.dragZone.removeChild(e.dragNode);\n            }, 500);\n        }\n    }\n});</pre></div><h3 class=\"__mx-style_index_-mt30\">部分不能拖动及排序</h3><div class=\"__mx-style_index_-pt20 __mx-style_index_-clearfix\"><ul mx-view=\"mx-dragsort/index?horizonal=true&vertical=false\" class=\"__mx-dragsort___test___index_-hor __mx-style_index_-fl\"><li ds-draggable=\"false\"><span>move</span>123</li><li ds-draggable=\"false\"><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li><span>move</span>456</li><li><span>move</span>123</li><li ds-draggable=\"false\"><span>move</span>456</li></ul></div><div class=\"__mx-style_index_-pt20\"><div>HTML Code:</div><pre>&lt;ul mx-view=\"app/gallery/mx-dragsort/index\" class=\"hor fl\" view-horizonal=\"true\" view-vertical=\"false\"&gt;\n    &lt;li ds-draggable=\"false\"&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li ds-draggable=\"false\"&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n    &lt;li&gt;&lt;span&gt;move&lt;/span&gt;123&lt;/li&gt;\n    &lt;li ds-draggable=\"false\"&gt;&lt;span&gt;move&lt;/span&gt;456&lt;/li&gt;\n&lt;/ul&gt;</pre></div>","subs":[],"file":"mx-dragsort/__test__/index.html"},
    render() {
        let me = this;
        me.updater.digest();
    },
    'stop<enterzone>'(e) {
        e.changePointer(false);
    },
    'ok<leavezone>'(e) {
        e.changePointer(true);
    },
    'del<dragfinish>'(e) {
        if (e.moved && e.outZone) {
            $(e.dragNode).slideUp();
            setTimeout(() => {
                e.dragZone.removeChild(e.dragNode);
            }, 500);
        }
    },
    'start<dragstart>'(e) {
        e.originalEvent.dataTransfer.effectAllowed = 'none';
        e.originalEvent.dataTransfer.setDragImage(e.target, -10, -18);
    },
    'drop<drop>'(e) {
        console.log(e);
        $(e.eventTarget).css({
            borderColor: '#ccc'
        });
    },
    'enter<dragenter>'(e) {
        $(e.eventTarget).css({
            borderColor: 'red'
        });
    },
    'leave<dragleave>'(e) {
        $(e.eventTarget).css({
            borderColor: '#ccc'
        });
    },
    '$doc<dragover>'(e) {
        e.preventDefault();
    }
});

});
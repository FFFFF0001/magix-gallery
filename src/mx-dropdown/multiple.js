define("mx-dropdown/multiple",["magix","$","../mx-monitor/index"],function(e,t,i){var s=e("magix"),a=e("$"),_=e("../mx-monitor/index");s.applyStyle("_p","._cy{position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cy:hover{border-color:#ccc}._cz{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px;border-radius:3px}._cA{cursor:not-allowed;background-color:#fbfbfb}._cA:hover{border-color:#e6e6e6}._cA ._cz{cursor:not-allowed}._cB{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cC ._cB{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cC,._cC:hover{border-color:#6363e6}._cD{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cE{color:#999}._cF{position:absolute;top:100%;left:-1px;width:350px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cC ._cF{display:block}._cG{overflow:auto;max-height:192px;padding:4px 0}._cH{display:block;width:100%;padding:9px 9px 4px}._cI{padding:0;width:100%}._cJ{color:#ccc;position:absolute;left:15px;top:18px}._cK{padding-left:28px;width:100%;height:28px;line-height:28px}._cL{padding:5px;color:#999;display:block;cursor:default}._cM{padding:3px 4px}._cN{color:#666;display:block;width:100%;padding:0 6px;height:26px;line-height:26px;border-radius:4px}._cO{width:32%;float:left;margin-left:2px;margin-bottom:2px}._cP{color:#666;display:block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cN:active,._cN:focus,._cN:hover,._cP:active,._cP:focus,._cP:hover{color:#333;background-color:#f0f0f0}._cQ,._cQ:active,._cQ:focus,._cQ:hover{color:#fff;background-color:#6363e6}._cR{border-top:1px solid #e6e6e6;margin:0 10px;padding:10px 0}");var c=function(e,t,i,a,_){if(!e[t]||s.has(i,a)){var c=i[a]||"";_||(c+=""),e[t]=c}return e[t]};i.exports=s.View.extend({tmpl:{html:'<div mx-guid="g0" class="_cz" mx-click="__aq()" title="<%=$$.selectedText%>"><span mx-guid="g1" class="_cD<%if($$.phLabel){%> _cE<%}%>">2</span><span class="__ _cB">&#xe692;</span></div><div mx-guid="g2" class="_cF">3</div>',subs:[{keys:["selectedText"],path:'div[mx-guid="g0"]',attr:'title="<%=$$.selectedText%>"',attrs:[{n:"title",p:1}]},{keys:["phLabel","selectedText"],path:'span[mx-guid="g1"]',tmpl:"<%=$$.selectedText%>",s:"2",attr:'class="_cD<%if($$.phLabel){%> _cE<%}%>"',attrs:[{n:"class",p:1,f:"className"}],mask:"21"},{keys:["rList","searchbox"],path:'div[mx-guid="g2"]',tmpl:'<%if($$.rList){if($$.searchbox){%><div class="_cH"><label class="_cI"><span class="__ _cJ">&#xe608;</span><input mx-keyup="__bP()" mx-paste="__bP()" mx-change="__bR()" mx-focusin="__bR()" mx-focusout="__bR()" placeholder="搜索关键词" class="_ao _cK"></label></div><%}%><ul mx-guid="g3" class="_cG" id="list_<%=$$.viewId%>">4</ul><div class="_cR"><button class="_am _an" mx-click="__a({enter:true})">确定</button><button class="_am _s" mx-click="__a()">取消</button></div><%}%>',s:"3"},{keys:["selected","list","textKey","valueKey"],path:'ul[mx-guid="g3"]',pKeys:["rList","searchbox"],tmpl:'<%var a=$$.selected.split(\',\'),b=void 0,c=void 0;for(var d=0;d<$$.list.length;d++){var e=$$.list[d];if(e&&e.group){%><li class="_cL _ak" title="<%=e[$$.textKey]%>"><%=e[$$.textKey]%></li><%}else{if($$.textKey&&$$.valueKey){b=e[$$.textKey];c=e[$$.valueKey];}else{b=e;c=e;}var f=$$.inArray(c+\'\',a)>-1;if(c===\'\'){%><li title="<%=b%>" class="_cM"><a href="#" class="_cN _ak <%if(f){%> _cQ<%}%>" mx-click="__bQ({item:\'<%@e%>\'})"><%=b%></a></li><%}else{%><li class="_cM _ah"><ul><%for(;d<$$.list.length;d++){e=$$.list[d];if(e&&e.group){d--;break;}if($$.textKey&&$$.valueKey){b=e[$$.textKey];c=e[$$.valueKey];}else{b=e;c=e;}var g=$$.inArray(c+\'\',a)>-1%><li class="_cO"><a href="#" class="_cP _ak<%if(g){%> _cQ<%}%>" mx-click="__bQ({item:\'<%@e%>\'})"><%=b%></a></li><%}%></ul></li><%}}}%>',s:"4"}]},init:function(e){var t=this;_.__d(),t.on("destroy",function(){_.__f(t),_.__g()}),t.updater.set({viewId:t.id,inArray:a.inArray});var i=a("#"+t.id);t.__h=i,i.addClass("_cy"),t.assign(e)},assign:function(e){var t=this;c(t,"__bE",e,"list",1);var i=c(t,"__au",e,"selected"),_=c(t,"__bF",e,"textKey"),r=c(t,"__bG",e,"valueKey"),o=c(t,"__bH",e,"emptyText");if(t.__bI=e.searchbox+""=="true",t.__bS=e.disabled+""=="true",!t.__bE){var l,n=[];t.__h.children().each(function(e,t){t=a(t),l="true"==t.attr("group"),n.push({group:l,text:t.text(),value:l?s.guid():t.attr("value")})}),_=t.__bF="text",r=t.__bG="value",t.__bE=n}var d=t.__bE,p=s.toMap(d,r);if(o)if(_&&r){if(!p[""]){var u={};u[_]=o,u[r]="",d.unshift(u),p[""]=u}}else p[o]||(d.unshift(o),p[o]=o);return t.__au=i,t.__bT=p,!0},__i:function(e){var t=this;return s.inside(e,t.id)},render:function(){var e=this;e.__h[e.__bS?"addClass":"removeClass"]("_cA"),e.__bU(e.__au)},__a:function(e){var t=this;if(t.__h.hasClass("_cC")){var i=t.updater.get();if(s.has(t,"__bV")){var a=e&&i.selected!==t.__bV;e?t.__bU(i.selected):t.__bU(t.__bV),a&&t.__h.val(i.selected).trigger({type:"change",keys:{text:i.textKey,value:i.valueKey},values:(i.selected+"").split(",")}),delete t.__bV}t.__h.removeClass("_cC").trigger("focusout"),_.__f(t)}},__e:function(){var e=this;if(!e.__h.hasClass("_cC")){e.updater.get("rList")||e.updater.digest({rList:!0}),e.__h.addClass("_cC").trigger("focusin");var t=a("#list_"+e.id),i=t.find("._cQ").position();if(i){var s=t.height(),c=t.prop("scrollTop");if(i.top<0||i.top>s){var r=i.top-s+c+s/2;t.prop("scrollTop",r)}}_.__k(e)}},__bW:function(e,t){for(var i=this.__bT,s=[],a=0,_=e;a<_.length;a++){var c=i[_[a]]||{};t?s.push(c[t]):s.push(c)}return s},__bU:function(e){var t=this;e=e||"",e+="";var i=t.__bF||"",s=t.__bG||"",a=e.split(","),_="",c=t.__bE;a.length?_=t.__bW(a,i):(e=c[0],_=c[0],i&&s&&(_=(e=e[s])[i])),t.updater.digest({list:c,textKey:i,valueKey:s,searchbox:t.__bI,phLabel:""===e,selected:t.__au=e,selectedText:_}),t.__h.val(e)},__bN:function(e,t){var i=this;clearTimeout(i.__bM);var s=i.__bE,a=[],_=0,c=s.length,r=i.__bF,o=i.__bG;if(e){var l=function(){if(_<c){for(var n=Math.min(_+400,c),d=_,p=void 0,u=void 0,b=void 0;d<n;d++)u=p=s[d],b=p,r&&o&&(u=p[r],b=p[o]),((u+"").indexOf(e)>=0||(b+"").indexOf(e)>=0)&&a.push(p);_=n,i.__bM=setTimeout(i.wrapAsync(l),20)}else t(a)};l()}else t(s)},"__aq<click>":function(){var e=this,t=e.__h;t.hasClass("_cC")?e.__a():t.hasClass("_cA")||e.__e()},"__bP<keyup,paste>":function(e){var t=this;clearTimeout(t.__bO);var i=a.trim(e.eventTarget.value);t.__bO=setTimeout(t.wrapAsync(function(){i!=t.__bX&&t.__bN(t.__bX=i,function(e){t.updater.digest({list:e})})}),300)},"__bQ<click>":function(e){e.preventDefault();var t=this,i=e.params.item,_=t.updater,c=_.get();s.has(t,"__bV")||(t.__bV=c.selected);var r=t.__bG,o=t.__bF,l=i,n=i;o&&r&&(n=i[o],l=i[r]);var d=[""];(n!=t.__bH||l)&&(d=c.selected.split(","));var p=a.inArray("",d);p>-1&&d.splice(p,1),-1==(p=a.inArray(l+"",d))?d.push(l):d.splice(p,1),d.length||c.emptyText&&(d=[""]),l=d.join(","),_.digest({selected:t.__au=l})},"__bR<change,focusin,focusout>":function(e){e.stopPropagation()},"__a<click>":function(e){this.__a(e.params.enter)}})});
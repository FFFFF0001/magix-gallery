define("mx-dropdown/multiple",["magix","$","../mx-monitor/index"],function(e,t,i){var s=e("magix"),a=e("$"),r=e("../mx-monitor/index");s.applyStyle("o",".cr{position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}.cr:hover{border-color:#ccc}.cs{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px;border-radius:3px}.ct{cursor:not-allowed;background-color:#fbfbfb}.ct:hover{border-color:#e6e6e6}.ct .cs{cursor:not-allowed}.cu{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}.cv .cu{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}.cv,.cv:hover{border-color:#6363e6}.cw{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.cx{color:#999}.cy{position:absolute;top:100%;left:-1px;width:350px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cv .cy{display:block}.cz{overflow:auto;max-height:192px;padding:4px 0}.cA{display:block;width:100%;padding:9px 9px 4px}.cB{padding:0;width:100%}.cC{color:#ccc;position:absolute;left:15px;top:18px}.cD{padding-left:28px;width:100%;height:28px;line-height:28px}.cE{padding:5px;color:#999;display:block;cursor:default}.cF{padding:3px 4px}.cG{color:#666;display:block;width:100%;padding:0 6px;height:26px;line-height:26px;border-radius:4px}.cH{width:32%;float:left;margin-left:2px;margin-bottom:2px}.cI{color:#666;display:block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}.cG:active,.cG:focus,.cG:hover,.cI:active,.cI:focus,.cI:hover{color:#333;background-color:#f0f0f0}.cJ,.cJ:active,.cJ:focus,.cJ:hover{color:#fff;background-color:#6363e6}.cK{border-top:1px solid #e6e6e6;margin:0 10px;padding:10px 0}");var c=function(e,t,i,s){if(!e[t]||i){var a=i||"";s||(a+=""),e[t]=a}return e[t]};i.exports=s.View.extend({tmpl:{html:'<div mx-guid="g0" class="cs" mx-click="__bM()" title="<%=$$.selectedText%>"><span mx-guid="g1" class="cw<%if($$.phLabel){%> cx<%}%>">2</span><span class="_ cu">&#xe692;</span></div><div mx-guid="g2" class="cy">3</div>',subs:[{keys:["selectedText"],path:'div[mx-guid="g0"]',attr:'title="<%=$$.selectedText%>"',attrs:[{n:"title",p:1}]},{keys:["phLabel","selectedText"],path:'span[mx-guid="g1"]',tmpl:"<%=$$.selectedText%>",s:"2",attr:'class="cw<%if($$.phLabel){%> cx<%}%>"',attrs:[{n:"class",p:1,f:"className"}],mask:"21"},{keys:["rList","searchbox"],path:'div[mx-guid="g2"]',tmpl:'<%if($$.rList){if($$.searchbox){%><div class="cA"><label class="cB"><span class="_ cC">&#xe608;</span><input mx-keyup="__bO()" mx-paste="__bO()" mx-change="__bQ()" mx-focusin="__bQ()" mx-focusout="__bQ()" placeholder="搜索关键词" class="an cD"></label></div><%}%><ul mx-guid="g3" class="cz" id="list_<%=$$.viewId%>">4</ul><div class="cK"><button class="al am" mx-click="__a({enter:true})">确定</button><button class="al s" mx-click="__a()">取消</button></div><%}%>',s:"3"},{keys:["selected","list","textKey","valueKey"],path:'ul[mx-guid="g3"]',pKeys:["rList","searchbox"],tmpl:'<%var a=$$.selected.split(\',\'),b=void 0,c=void 0;for(var d=0;d<$$.list.length;d++){var e=$$.list[d];if(e&&e.group){%><li class="cE aj" title="<%=e[$$.textKey]%>"><%=e[$$.textKey]%></li><%}else{if($$.textKey&&$$.valueKey){b=e[$$.textKey];c=e[$$.valueKey];}else{b=e;c=e;}var f=$$.inArray(c+\'\',a)>-1;if(c===\'\'){%><li title="<%=b%>" class="cF"><a href="#" class="cG aj <%if(f){%> cJ<%}%>" mx-click="__bP({item:\'<%@e%>\'})"><%=b%></a></li><%}else{%><li class="cF ag"><ul><%for(;d<$$.list.length;d++){e=$$.list[d];if(e&&e.group){d--;break;}if($$.textKey&&$$.valueKey){b=e[$$.textKey];c=e[$$.valueKey];}else{b=e;c=e;}var g=$$.inArray(c+\'\',a)>-1%><li class="cH"><a href="#" class="cI aj<%if(g){%> cJ<%}%>" mx-click="__bP({item:\'<%@e%>\'})"><%=b%></a></li><%}%></ul></li><%}}}%>',s:"4"}]},init:function(e){var t=this;r.__d(),t.on("destroy",function(){r.__f(t),r.__g()}),t.updater.set({viewId:t.id,inArray:a.inArray});var i=a("#"+t.id);t.__h=i,i.addClass("cr"),t.assign(e)},assign:function(e){var t=this;c(t,"__bC",e.list,!0);var i=c(t,"__as",e.selected),r=c(t,"__bD",e.textKey),o=c(t,"__bE",e.valueKey),l=c(t,"__bF",e.emptyText);if(t.__bG=e.searchbox+""=="true",t.__bR=e.disabled+""=="true",!t.__bC){var n,_=[];t.__h.children().each(function(e,t){t=a(t),n="true"==t.attr("group"),_.push({group:n,text:t.text(),value:n?s.guid():t.attr("value")})}),r=t.__bD="text",o=t.__bE="value",t.__bC=_}var d=t.__bC,p=s.toMap(d,o);if(l)if(r&&o){if(!p[""]){var u={};u[r]=l,u[o]="",d.unshift(u),p[""]=u}}else p[l]||(d.unshift(l),p[l]=l);return t.__as=i,t.__bS=p,!0},__i:function(e){var t=this;return s.inside(e,t.id)},render:function(){var e=this;e.__h[e.__bR?"addClass":"removeClass"]("ct"),e.__bT(e.__as)},__a:function(e){var t=this;if(t.__h.hasClass("cv")){var i=t.updater.get();if(s.has(t,"__bU")){var a=e&&i.selected!==t.__bU;e?t.__bT(i.selected):t.__bT(t.__bU),a&&t.__h.val(i.selected).trigger({type:"change",keys:{text:i.textKey,value:i.valueKey},values:(i.selected+"").split(",")}),delete t.__bU}t.__h.removeClass("cv").trigger("focusout"),r.__f(t)}},__e:function(){var e=this;if(!e.__h.hasClass("cv")){e.updater.get("rList")||e.updater.digest({rList:!0}),e.__h.addClass("cv").trigger("focusin");var t=a("#list_"+e.id),i=t.find(".cJ").position();if(i){var s=t.height(),c=t.prop("scrollTop");if(i.top<0||i.top>s){var o=i.top-s+c+s/2;t.prop("scrollTop",o)}}r.__k(e)}},__bV:function(e,t){for(var i=this.__bS,s=[],a=0,r=e;a<r.length;a++){var c=i[r[a]]||{};t?s.push(c[t]):s.push(c)}return s},__bT:function(e){var t=this;e=e||"",e+="";var i=t.__bD||"",s=t.__bE||"",a=e.split(","),r="",c=t.__bC;a.length?r=t.__bV(a,i):(e=c[0],r=c[0],i&&s&&(r=(e=e[s])[i])),t.updater.digest({list:c,textKey:i,valueKey:s,searchbox:t.__bG,phLabel:""===e,selected:t.__as=e,selectedText:r}),t.__h.val(e)},__bL:function(e,t){var i=this;clearTimeout(i.__bK);var s=i.__bC,a=[],r=0,c=s.length,o=i.__bD,l=i.__bE;if(e){var n=function(){if(r<c){for(var _=Math.min(r+400,c),d=r,p=void 0,u=void 0,b=void 0;d<_;d++)u=p=s[d],b=p,o&&l&&(u=p[o],b=p[l]),((u+"").indexOf(e)>=0||(b+"").indexOf(e)>=0)&&a.push(p);r=_,i.__bK=setTimeout(i.wrapAsync(n),20)}else t(a)};n()}else t(s)},"__bM<click>":function(){var e=this,t=e.__h;t.hasClass("cv")?e.__a():t.hasClass("ct")||e.__e()},"__bO<keyup,paste>":function(e){var t=this;clearTimeout(t.__bN);var i=a.trim(e.eventTarget.value);t.__bN=setTimeout(t.wrapAsync(function(){i!=t.__bW&&t.__bL(t.__bW=i,function(e){t.updater.digest({list:e})})}),300)},"__bP<click>":function(e){e.preventDefault();var t=this,i=e.params.item,r=t.updater,c=r.get();s.has(t,"__bU")||(t.__bU=c.selected);var o=t.__bE,l=t.__bD,n=i,_=i;l&&o&&(_=i[l],n=i[o]);var d=[""];(_!=t.__bF||n)&&(d=c.selected.split(","));var p=a.inArray("",d);p>-1&&d.splice(p,1),-1==(p=a.inArray(n+"",d))?d.push(n):d.splice(p,1),d.length||c.emptyText&&(d=[""]),n=d.join(","),r.digest({selected:t.__as=n})},"__bQ<change,focusin,focusout>":function(e){e.stopPropagation()},"__a<click>":function(e){this.__a(e.params.enter)}})});
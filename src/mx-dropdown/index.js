define("mx-dropdown/index",["magix","$","../mx-monitor/index"],function(e,t,i){var s=e("magix"),a=e("$"),_=e("../mx-monitor/index");s.applyStyle("_o","._cl{position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cl:hover{border-color:#ccc}._cm{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px}._cn{cursor:not-allowed;background-color:#fbfbfb}._cn:hover{border-color:#e6e6e6}._cn ._cm{cursor:not-allowed}._co{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cp ._co{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cp,._cp:hover{border-color:#6363e6}._cq{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cr{color:#999}._cs{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cp ._cs{display:block}._ct{overflow:auto;max-height:196px;padding:4px 0}._cu{display:block;width:100%;padding:9px 9px 4px}._cv{padding:0;width:100%}._cw{color:#ccc;position:absolute;left:15px;top:16px}._cx{padding-left:28px;height:28px;line-height:28px;width:100%}._cy{padding:5px;color:#999;display:block;cursor:default}._cz{padding:0 4px;margin:2px 0}._cA{color:#666;display:block;width:100%;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cA:hover{color:#333;background-color:#f0f0f0}._cB,._cB:active,._cB:focus,._cB:hover{color:#fff;background-color:#6363e6}");var o=function(e,t,i,a,_){if(!e[t]||s.has(i,a)){var o=i[a]||"";_||(o+=""),e[t]=o}return e[t]};i.exports=s.View.extend({tmpl:{html:'<div mx-guid="g0" class="_cm" mx-click="__aB()" title="<%=$$.selectedText%>"><span mx-guid="g1" class="_cq<%if($$.selected===\'\'){%> _cr<%}%>">2</span><span class="__ _co">&#xe692;</span></div><div mx-guid="g2" class="_cs">3</div>',subs:[{keys:["selectedText"],path:'div[mx-guid="g0"]',attr:'title="<%=$$.selectedText%>"',attrs:[{n:"title",p:1}]},{keys:["selected","selectedText"],path:'span[mx-guid="g1"]',tmpl:"<%=$$.selectedText%>",s:"2",attr:"class=\"_cq<%if($$.selected===''){%> _cr<%}%>\"",attrs:[{n:"class",p:1,f:"className"}],mask:"21"},{keys:["rList","searchbox"],path:'div[mx-guid="g2"]',tmpl:'<%if($$.rList){if($$.searchbox){%><div class="_cu"><label class="_cv"><span class="__ _cw">&#xe608;</span><input placeholder="搜索关键词" mx-keyup="__c_()" mx-paste="__c_()" mx-change="__cb()" mx-focusin="__cb()" mx-focusout="__cb()" class="_ap _cx"></label></div><%}%><ul mx-guid="g3" class="_ct" id="list_<%=$$.viewId%>">4</ul><%}%>',s:"3"},{keys:["list","textKey","valueKey","selected"],path:'ul[mx-guid="g3"]',pKeys:["rList","searchbox"],tmpl:'<%var a=void 0,b=void 0;for(var c=0,d=$$.list;c<d.length;c++){var e=d[c];if($$.textKey&&$$.valueKey){a=e[$$.textKey];b=e[$$.valueKey];}else{a=e;b=e;}if(e&&e.group){%><li class="_cy _al" title="<%=e[$$.textKey]%>"><%=e[$$.textKey]%></li><%}else{%><li title="<%=a%>" class="_cz"><%var f=(b+\'\')===($$.selected+\'\')%><a href="#" class="_cA _al<%if(f){%> _cB<%}%>" mx-click="__ca({item:\'<%@e%>\'})"><%=a%></a></li><%}}%>',s:"4"}]},init:function(e){var t=this;_.__e(),t.on("destroy",function(){_.__g(t),_.__h()}),t.updater.set({viewId:t.id});var i=a("#"+t.id);i.addClass("_cl"),t.__i=i,t.assign(e)},assign:function(e){var t=this;o(t,"__bP",e,"list",1);var i=o(t,"__aF",e,"selected"),_=o(t,"__bQ",e,"textKey"),c=o(t,"__bR",e,"valueKey"),r=o(t,"__bS",e,"emptyText");if(t.__bT=e.searchbox+""=="true",t.__bU=e.disabled+""=="true",!t.__bP){var l,n=[];t.__i.children().each(function(e,t){t=a(t),l="true"==t.attr("group"),n.push({group:l,text:t.text(),value:l?s.guid():t.attr("value")})}),_=t.__bQ="text",c=t.__bR="value",t.__bP=n}var d=t.__bP,p=s.toMap(d,c);if(r)if(_&&c){if(!p[""]){var u={};u[_]=r,u[c]="",d.unshift(u),p[""]=u}}else p[r]||(d.unshift(r),p[r]=r);return i||!r||_||c||(i=r),i&&p[i]||(i=p[i]||d[0],_&&c&&(i=i[c])),t.__aF=i,t.__bV=_&&c?p[i][_]:i,!0},__j:function(e){return s.inside(e,this.id)},render:function(){var e=this;e.__i[e.__bU?"addClass":"removeClass"]("_cn"),e.__bW(!0)},__a:function(){var e=this;e.__i.hasClass("_cp")&&(e.__i.removeClass("_cp").trigger("focusout"),_.__g(e))},__f:function(){var e=this;if(!e.__i.hasClass("_cp")){e.updater.get("rList")||e.updater.digest({rList:!0}),e.__i.addClass("_cp").trigger("focusin");var t=a("#list_"+e.id),i=t.find("._cB").position(),s=t.height(),o=t.prop("scrollTop");if(i.top<0||i.top>s){var c=i.top-s+o+s/2;t.prop("scrollTop",c)}_.__l(e)}},__bW:function(e){var t=this,i=t.__aF;t.updater.digest({textKey:t.__bQ,valueKey:t.__bR,selected:i,searchbox:t.__bT,selectedText:t.__bV,list:t.__bP.slice()}),t.__i.val(i),e||t.__v(i)},__bY:function(e,t){var i=this;clearTimeout(i.__bX);var s=i.__bP,a=[],_=0,o=s.length,c=i.__bQ,r=i.__bR;if(e){var l=function(){if(_<o){for(var n=Math.min(_+400,o),d=_,p=void 0,u=void 0,x=void 0;d<n;d++)u=p=s[d],x=p,c&&r&&(u=p[c],x=p[r]),((u+"").indexOf(e)>=0||(x+"").indexOf(e)>=0)&&a.push(p);_=n,i.__bX=setTimeout(i.wrapAsync(l),20)}else t(a)};l()}else t(s)},__v:function(e,t){var i=this,s=i.updater,_=i.__bR,o=i.__bQ,c=i.__aF,r=e,l=e;if(o&&_&&(l=e[o],r=e[_]),!t||c!==r){s.set({selected:i.__aF=r});var n=a.Event("change",{item:e,keys:{text:o,value:_},value:_?e[_]:e,text:o?e[o]:e});i.__i.val(_?e[_]:e).trigger(n),n.isDefaultPrevented()?s.set({selected:c}):s.digest({selected:r,selectedText:l})}},"__aB<click>":function(){var e=this,t=e.__i;t.hasClass("_cp")?e.__a():t.hasClass("_cn")||e.__f()},"__c_<keyup,paste>":function(e){var t=this;e.stopPropagation(),clearTimeout(t.__bZ);var i=a.trim(e.eventTarget.value);t.__bZ=setTimeout(t.wrapAsync(function(){i!=t.$lVal&&t.__bY(t.$lVal=i,function(e){t.updater.digest({list:e})})}),300)},"__ca<click>":function(e){e.preventDefault(),e.stopPropagation();var t=this;t.__v(e.params.item,!0),t.__a()},"__cb<change,focusin,focusout>":function(e){e.stopPropagation()}})});
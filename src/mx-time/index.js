define("mx-time/index",["magix","$"],function(e,t,_){var i=e("magix"),s=e("$");i.applyStyle("J",".fy{width:58px;float:left;overflow:hidden}.fz{font-size:30px;height:50px;text-align:center;margin-bottom:10px}.fA{width:28px;height:28px;padding:0}.fB{font-size:27px;float:left;line-height:32px;margin-top:8px;font-weight:bolder;display:inline-block;width:30px;text-align:center}");var n=function(e){if(!e){var t=new Date;e=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}var _=e.split(":");if(3!=_.length)throw new Error("bad time:"+e);return{__cm:parseInt(_[0],10)||0,__fy:parseInt(_[1],10)||0,__fz:parseInt(_[2],10)||0}},a=function(e){e||(e="all");var t={__cm:!0,__fy:!0,__fz:!0},_={hour:"__cm",minute:"__fy",second:"__fz"};if("all"!=e)for(var i in _)-1===e.indexOf(i)&&delete t[_[i]];return t},d=function(e){return e<10?"0"+e:e};_.exports=i.View.extend({tmpl:{html:'<div class="fy"><input mx-guid="g0" class="an fz" value="<%=$$.format($$.time[\'__cm\'])%>" <%if($$.types[\'__cm\']){%> mx-change="__fC({type:\'__cm\'})" <%}else{%> disabled<%}%> maxlength="2" mx-keydown="__ds({type:\'__cm\'})" autocomplete="off"><button mx-guid="g1" type="button" class="al fA Z" <%if($$.types[\'__cm\']){%> mx-click="__fB({type:\'__cm\'})" mx-mousedown="__dr({type:\'__cm\'})" <%}else{%> disabled<%}%> tabindex="-1"><i class="_">&#xe6df;</i></button><button mx-guid="g2" type="button" class="al fA a_" <%if($$.types[\'__cm\']){%> mx-click="__fB({type:\'__cm\',inc:1})" mx-mousedown="__dr({type:\'__cm\',inc:1})" <%}else{%> disabled<%}%> tabindex="-1"><i class="_">&#xe661;</i></button></div><span class="fB">:</span><div class="fy"><input mx-guid="g3" class="an fz" value="<%=$$.format($$.time[\'__fy\'])%>" <%if($$.types[\'__fy\']){%> mx-change="__fC({type:\'__fy\'})" <%}else{%> disabled<%}%> maxlength="2" mx-keydown="__ds({type:\'__fy\'})" autocomplete="off"><button mx-guid="g4" type="button" class="al fA Z" <%if($$.types[\'__fy\']){%> mx-click="__fB({type:\'__fy\'})" mx-mousedown="__dr({type:\'__fy\'})" <%}else{%> disabled<%}%> tabindex="-1"><i class="_">&#xe6df;</i></button><button mx-guid="g5" type="button" class="al fA a_" <%if($$.types[\'__fy\']){%> mx-click="__fB({type:\'__fy\',inc:1})" mx-mousedown="__dr({type:\'__fy\',inc:1})" <%}else{%> disabled<%}%> tabindex="-1"><i class="_">&#xe661;</i></button></div><span class="fB">:</span><div class="fy"><input mx-guid="g6" class="an fz" value="<%=$$.format($$.time[\'__fz\'])%>" <%if($$.types[\'__fz\']){%> mx-change="__fC({type:\'__fz\'})" <%}else{%> disabled<%}%> maxlength="2" mx-keydown="__ds({type:\'__fz\'})" autocomplete="off"><button mx-guid="g7" type="button" class="al fA Z" <%if($$.types[\'__fz\']){%> mx-click="__fB({type:\'__fz\'})" mx-mousedown="__dr({type:\'__fz\'})" <%}else{%> disabled<%}%> tabindex="-1"><i class="_">&#xe6df;</i></button><button mx-guid="g8" type="button" class="al fA a_" <%if($$.types[\'__fz\']){%> mx-click="__fB({type:\'__fz\',inc:1})" mx-mousedown="__dr({type:\'__fz\',inc:1})" <%}else{%> disabled<%}%> tabindex="-1"><i class="_">&#xe661;</i></button></div>',subs:[{keys:["time","types"],path:'input[mx-guid="g0"]',attr:"value=\"<%=$$.format($$.time['__cm'])%>\" <%if($$.types['__cm']){%> mx-change=\"__fC({type:'__cm'})\" <%}else{%> disabled<%}%>",attrs:[{n:"value",q:1,p:1},{n:"mx-change"},{n:"disabled",b:1,p:1}]},{keys:["types"],path:'button[mx-guid="g1"]',attr:"<%if($$.types['__cm']){%> mx-click=\"__fB({type:'__cm'})\" mx-mousedown=\"__dr({type:'__cm'})\" <%}else{%> disabled<%}%>",attrs:[{n:"mx-click"},{n:"mx-mousedown"},{n:"disabled",b:1,p:1}]},{keys:["types"],path:'button[mx-guid="g2"]',attr:"<%if($$.types['__cm']){%> mx-click=\"__fB({type:'__cm',inc:1})\" mx-mousedown=\"__dr({type:'__cm',inc:1})\" <%}else{%> disabled<%}%>",attrs:[{n:"mx-click"},{n:"mx-mousedown"},{n:"disabled",b:1,p:1}]},{keys:["time","types"],path:'input[mx-guid="g3"]',attr:"value=\"<%=$$.format($$.time['__fy'])%>\" <%if($$.types['__fy']){%> mx-change=\"__fC({type:'__fy'})\" <%}else{%> disabled<%}%>",attrs:[{n:"value",q:1,p:1},{n:"mx-change"},{n:"disabled",b:1,p:1}]},{keys:["types"],path:'button[mx-guid="g4"]',attr:"<%if($$.types['__fy']){%> mx-click=\"__fB({type:'__fy'})\" mx-mousedown=\"__dr({type:'__fy'})\" <%}else{%> disabled<%}%>",attrs:[{n:"mx-click"},{n:"mx-mousedown"},{n:"disabled",b:1,p:1}]},{keys:["types"],path:'button[mx-guid="g5"]',attr:"<%if($$.types['__fy']){%> mx-click=\"__fB({type:'__fy',inc:1})\" mx-mousedown=\"__dr({type:'__fy',inc:1})\" <%}else{%> disabled<%}%>",attrs:[{n:"mx-click"},{n:"mx-mousedown"},{n:"disabled",b:1,p:1}]},{keys:["time","types"],path:'input[mx-guid="g6"]',attr:"value=\"<%=$$.format($$.time['__fz'])%>\" <%if($$.types['__fz']){%> mx-change=\"__fC({type:'__fz'})\" <%}else{%> disabled<%}%>",attrs:[{n:"value",q:1,p:1},{n:"mx-change"},{n:"disabled",b:1,p:1}]},{keys:["types"],path:'button[mx-guid="g7"]',attr:"<%if($$.types['__fz']){%> mx-click=\"__fB({type:'__fz'})\" mx-mousedown=\"__dr({type:'__fz'})\" <%}else{%> disabled<%}%>",attrs:[{n:"mx-click"},{n:"mx-mousedown"},{n:"disabled",b:1,p:1}]},{keys:["types"],path:'button[mx-guid="g8"]',attr:"<%if($$.types['__fz']){%> mx-click=\"__fB({type:'__fz',inc:1})\" mx-mousedown=\"__dr({type:'__fz',inc:1})\" <%}else{%> disabled<%}%>",attrs:[{n:"mx-click"},{n:"mx-mousedown"},{n:"disabled",b:1,p:1}]}]},init:function(e){var t=this,_=n(e.time),i=a(e.type);t.updater.set({format:d,time:_,types:i})},render:function(){this.updater.digest()},val:function(e){var t=this.updater;if(e){var _=n(e);t.digest({time:_})}return t.get("time")},__fA:function(e,t){var _=this,i=_.updater.get("time"),s="__cm"==e?23:59;t?i[e]++:i[e]--,i[e]>s?i[e]=0:i[e]<0&&(i[e]=s),_.updater.digest({time:i})},__u:function(){var e=this,t=s("#"+e.id),_=e.updater.get("time");t.trigger({type:"change",time:d(_.__cm)+":"+d(_.__fy)+":"+d(_.__fz)})},"__fB<click>":function(e){var t=this;if(!t.__do){var _=e.params;t.__fA(_.type,_.inc),t.__u()}},"__fC<change>":function(e){e.stopPropagation();var t=e.params.type,_="__cm"==t?23:59,i=e.eventTarget,s=i.value,n=parseInt(s,10),a=this.updater.get("time");n||0===n?(n<0?n=0:n>_&&(n=_),n!==a[t]?(a[t]=n,this.updater.digest({time:a}),this.__u()):i.value=d(n)):i.value=d(a[t])},"__dr<mousedown>":function(e){var t=this,_=e.params;t.__dp=setTimeout(t.wrapAsync(function(){t.__dq=setInterval(t.wrapAsync(function(){t.__do=!0,t.__fA(_.type,_.inc)}),50)}),300)},"__ds<keydown>":function(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();var t=this;t.__fA(e.params.type,38==e.keyCode),clearTimeout(t.__fD),t.__fD=setTimeout(t.wrapAsync(function(){t.__u()}),100)}},"$doc<mouseup>":function(){var e=this;clearTimeout(e.__dp),clearInterval(e.__dq),setTimeout(e.wrapAsync(function(){e.__do&&e.__u(),delete e.__do}),0)}})});
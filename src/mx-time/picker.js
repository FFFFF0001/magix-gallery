define("mx-time/picker",["magix","$","../mx-monitor/index","./index"],(e,t,i)=>{e("./index");let _=e("magix"),d=e("$"),a=e("../mx-monitor/index");_.applyStyle("_M","._fu{position:absolute;display:none;border:1px solid #e6e6e6;padding:10px 0;border-radius:4px;background-color:#fff;z-index:1;width:271px}._fv{margin:0 10px}._fw{border-top:1px solid #e6e6e6;margin:10px 10px 0;padding:10px 0 0}"),i.exports=_.View.extend({tmpl:{html:'<div mx-guid="g0" class="_fu" id="wrapper_<%=$$.viewId%>"><div mx-guid="g1" mx-view="mx-time/index?time=<%!$eu($$.time)%>&type=<%!$eu($$.types)%>" id="time_<%=$$.viewId%>" class="_fv _ai" mx-change="__ge()"></div><div class="_fw"><button type="button" class="_an _ao" mx-click="__a({enter:true})">确定</button><button type="button" class="_an _s" mx-click="__a()">取消</button></div></div>',subs:[{keys:["viewId"],path:'div[mx-guid="g0"]',attr:'id="wrapper_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]},{keys:["time","types","viewId"],path:'div[mx-guid="g1"]',attr:'mx-view="mx-time/index?time=<%!$eu($$.time)%>&type=<%!$eu($$.types)%>" id="time_<%=$$.viewId%>"',attrs:[{n:"mx-view",v:1},{n:"id",p:1}]}]},init(e){let t=this;a.__d();let i=d("#"+t.id),_=()=>{t.__e()};t.on("destroy",()=>{a.__f(t),a.__g(),d("#tcnt_"+t.id).remove(),i.off("click",_)}),i.on("click",_),t.__h=i,i.prop("autocomplete","off");let n=i.val();if(!n){let e=new Date;n=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}e.time=n,t.__gb=n,t.__gc=n,t.updater.set(e)},__i(e){return _.inside(e,this.id)||_.inside(e,"tcnt_"+this.id)},render(){let e=this;d(`<div id="tcnt_${e.id}"/>`).insertAfter(e.__h);let t=e.updater;t.to("tcnt_"+e.id),t.digest({viewId:e.id})},__e(){let e=this;if(!e.__gd){let t=d("#wrapper_"+e.id),i=e.__h;e.__gd=!0,a.__k(e),t.show();let _,n,r=i.offset(),s=e.updater.get();switch(s.placement){case"top":n=r.top-t.outerHeight()-5;break;default:n=r.top+i.outerHeight()+5}switch(s.align){case"right":_=r.left+i.outerWidth()-t.outerWidth();break;default:_=r.left}t.offset({left:_,top:n})}},__a(){let e=this;if(e.__gd){let t=d("#wrapper_"+e.id);e.__gd=!1,t.hide(),a.__f(e),e.__gb!=e.__gc&&(e.__gb=e.__gc,d("#time_"+e.id).invokeView("val",[e.__gb]))}},"__ge<change>"(e){this.__gb=e.time},"__a<click>"(e){let t=this;e.params.enter&&(t.__gc=t.__gb,t.__h.val(t.__gb).trigger("change")),t.__a()}})});
define("mx-time/picker",["magix","$","../mx-monitor/index","./index"],function(i,t,e){i("./index");var _=i("magix"),d=i("$"),n=i("../mx-monitor/index");_.applyStyle("_L","._ft{position:absolute;display:none;border:1px solid #e6e6e6;padding:10px 0;border-radius:4px;background-color:#fff;z-index:1;width:271px}._fu{margin:0 10px}._fv{border-top:1px solid #e6e6e6;margin:10px 10px 0;padding:10px 0 0}"),e.exports=_.View.extend({tmpl:{html:'<div mx-guid="g0" class="_ft" id="wrapper_<%=$$.viewId%>"><div mx-guid="g1" mx-view="mx-time/index?time=<%!$eu($$.time)%>&type=<%!$eu($$.types)%>" id="time_<%=$$.viewId%>" class="_fu _ai" mx-change="__ga()"></div><div class="_fv"><button type="button" class="_an _ao" mx-click="__a({enter:true})">确定</button><button type="button" class="_an _s" mx-click="__a()">取消</button></div></div>',subs:[{keys:["viewId"],path:'div[mx-guid="g0"]',attr:'id="wrapper_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]},{keys:["time","types","viewId"],path:'div[mx-guid="g1"]',attr:'mx-view="mx-time/index?time=<%!$eu($$.time)%>&type=<%!$eu($$.types)%>" id="time_<%=$$.viewId%>"',attrs:[{n:"mx-view",v:1},{n:"id",p:1}]}]},init:function(i){var t=this;n.__d();var e=d("#"+t.id),_=function(){t.__e()};t.on("destroy",function(){n.__f(t),n.__g(),d("#tcnt_"+t.id).remove(),e.off("click",_)}),e.on("click",_),t.__h=e,e.prop("autocomplete","off");var a=e.val();if(!a){var r=new Date;a=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()}i.time=a,t.__fY=a,t.__fZ=a,t.updater.set(i)},__i:function(i){var t=this;return _.inside(i,t.id)||_.inside(i,"tcnt_"+t.id)},render:function(){var i=this;d('<div id="tcnt_'+i.id+'"/>').insertAfter(i.__h);var t=i.updater;t.to("tcnt_"+i.id),t.digest({viewId:i.id})},__e:function(){var i=this;if(!i.__g_){var t=d("#wrapper_"+i.id),e=i.__h;i.__g_=!0,n.__k(i),t.show();var _=e.offset(),a=void 0,r=void 0,o=i.updater.get();switch(o.placement){case"top":r=_.top-t.outerHeight()-5;break;default:r=_.top+e.outerHeight()+5}switch(o.align){case"right":a=_.left+e.outerWidth()-t.outerWidth();break;default:a=_.left}t.offset({left:a,top:r})}},__a:function(){var i=this;if(i.__g_){var t=d("#wrapper_"+i.id);i.__g_=!1,t.hide(),n.__f(i),i.__fY!=i.__fZ&&(i.__fY=i.__fZ,d("#time_"+i.id).invokeView("val",[i.__fY]))}},"__ga<change>":function(i){this.__fY=i.time},"__a<click>":function(i){var t=this;i.params.enter&&(t.__fZ=t.__fY,t.__h.val(t.__fY).trigger("change")),t.__a()}})});
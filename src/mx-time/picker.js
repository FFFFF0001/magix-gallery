define("mx-time/picker",["magix","$","../mx-monitor/index","./index"],function(i,e,t){i("./index");var _=i("magix"),d=i("$"),n=i("../mx-monitor/index");_.applyStyle("_L","._fq{position:absolute;display:none;border:1px solid #e6e6e6;padding:10px 0;border-radius:4px;background-color:#fff;z-index:1;width:271px}._fr{margin:0 10px}._fs{border-top:1px solid #e6e6e6;margin:10px 10px 0;padding:10px 0 0}"),t.exports=_.View.extend({tmpl:{html:'<div mx-guid="g0" class="_fq" id="wrapper_<%=$$.viewId%>"><div mx-guid="g1" mx-view="mx-time/index?time=<%!$eu($$.time)%>&type=<%!$eu($$.types)%>" id="time_<%=$$.viewId%>" class="_fr _ah" mx-change="__fR()"></div><div class="_fs"><button type="button" class="_am _an" mx-click="__a({enter:true})">确定</button><button type="button" class="_am _s" mx-click="__a()">取消</button></div></div>',subs:[{keys:["viewId"],path:'div[mx-guid="g0"]',attr:'id="wrapper_<%=$$.viewId%>"',attrs:[{n:"id",p:1}]},{keys:["time","types","viewId"],path:'div[mx-guid="g1"]',attr:'mx-view="mx-time/index?time=<%!$eu($$.time)%>&type=<%!$eu($$.types)%>" id="time_<%=$$.viewId%>"',attrs:[{n:"mx-view",v:1},{n:"id",p:1}]}]},init:function(i){var e=this;n.__d();var t=d("#"+e.id),_=function(){e.__e()};e.on("destroy",function(){n.__f(e),n.__g(),d("#tcnt_"+e.id).remove(),t.off("click",_)}),t.on("click",_),e.__h=t,t.prop("autocomplete","off");var a=t.val();if(!a){var r=new Date;a=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()}i.time=a,e.__fO=a,e.__fP=a,e.updater.set(i)},__i:function(i){var e=this;return _.inside(i,e.id)||_.inside(i,"tcnt_"+e.id)},render:function(){var i=this;d('<div id="tcnt_'+i.id+'"/>').insertAfter(i.__h);var e=i.updater;e.to("tcnt_"+i.id),e.digest({viewId:i.id})},__e:function(){var i=this;if(!i.__fQ){var e=d("#wrapper_"+i.id),t=i.__h;i.__fQ=!0,n.__k(i),e.show();var _=t.offset(),a=void 0,r=void 0,o=i.updater.get();switch(o.placement){case"top":r=_.top-e.outerHeight()-5;break;default:r=_.top+t.outerHeight()+5}switch(o.align){case"right":a=_.left+t.outerWidth()-e.outerWidth();break;default:a=_.left}e.offset({left:a,top:r})}},__a:function(){var i=this;if(i.__fQ){var e=d("#wrapper_"+i.id);i.__fQ=!1,e.hide(),n.__f(i),i.__fO!=i.__fP&&(i.__fO=i.__fP,d("#time_"+i.id).invokeView("val",[i.__fO]))}},"__fR<change>":function(i){this.__fO=i.time},"__a<click>":function(i){var e=this;i.params.enter&&(e.__fP=e.__fO,e.__h.val(e.__fO).trigger("change")),e.__a()}})});
define("mx-day/month",["magix","$","mx-dragselect/index"],(e,a,t)=>{e("mx-dragselect/index");let _=e("magix");_.applyStyle("_k","._bN{padding:0;height:38.4px;overflow:hidden;cursor:default;border:none;border-right:1px solid #e6e6e6}._bO{border-right:none}._bP{background-color:#f37b63}._bQ{opacity:0}._bR{cursor:not-allowed;background-color:#fbfbfb}");let s=e("$"),d={MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6,SUN:0},r={1:"MON",2:"TUE",3:"WED",4:"THU",5:"FRI",6:"SAT",0:"SUN"},i=(e,a)=>{e=(e=e||"").slice(0,a);for(let t=0;t<a;t++)e.length<=t&&(e+="0");return e};t.exports=_.View.extend({tmpl:{html:'<table class="_W _X"><tbody><tr mx-guid="g0" mx-change="__e()" mx-dragbegin="__aF()" mx-dragfinish="__aG()" mx-view="mx-dragselect/index?selector=td%5Benable%3Dtrue%5D">1</tr></tbody></table>',subs:[{keys:["days","selected"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var _=0;_<31;_++){%><td data-day="<%=_%>" enable="<%=_<$$.days?true:false%>" class="_bN<%if($$.selected.charAt(_)===\'1\'){%> _bP<%}if(_==30){%> _bO<%}if(_>=$$.days){%> _bR<%}%>"><span class="_bQ"><%=(\'0\'+(_+1)).slice(-2)%></span></td><%}%>',s:"1"}]},init(e){this.assign(e),this.__h=s("#"+this.id)},assign(e){let a=((e,a)=>32-new Date(e,a,32).getDate())(e.year,e.month);return this.__ay=a,this.__az=e.year,this.__aA=e.month,this.__aB=i(e.selected,a),!0},__p(e){let a=this;if(e){let t=a.__ay;a.__aB=i(e,t),a.render()}},__at(e,a){let t=this,_=t.__aB,s=t.__az,r=t.__aA,i=t.__ay,l=d[e];for(let e=1;e<=i;e++){new Date(s,r,e).getDay()===l&&(_=_.slice(0,e-1)+(a?"1":"0")+_.slice(e))}t.__aB=_,t.render(!0)},render(e){let a=this;a.updater.digest({days:a.__ay,selected:a.__aB}),a.__aC=(e=>{let a={};for(let t=e.length;t--;)"1"===e.charAt(t)&&(a[t]=1);return a})(a.__aB),a.__h.trigger({type:"sync",ignoreSync:e,days:a.__aB})},__aq(){let e=this.__aB,a=this.__az,t=this.__aA,s=this.__ay,d={};for(let _=1;_<=s;_++)if("1"!=e.charAt(_-1)){let e=new Date(a,t,_);d[r[e.getDay()]]=1}return _.keys(d)},"__e<change,click>"(e){e.stopPropagation();let a=s(e.node),t=this,d=t.updater.get(),r=a.data("day"),i=t.__aC,l=t.__aD;"add"==e.action?i[r]?(a.removeClass("_bP"),delete i[r],"drag"==e.mode&&(l[r]=1)):(a.addClass("_bP"),i[r]=1,"drag"==e.mode&&delete l[r]):"remove"==e.action&&(l[r]?(a.addClass("_bP"),i[r]=1,"drag"==e.mode&&delete l[r]):(a.removeClass("_bP"),delete i[r],"drag"==e.mode&&(l[r]=1)));let n=t.__ay,o="";for(let e=0;e<n;e++)_.has(i,e)?o+="1":o+="0";d.selected=t.__aB=o,"click"==e.mode&&t.__h.trigger({type:"change",days:o})},"__aF<dragbegin>"(e){e.stopPropagation();this.__aE=this.__aB,this.__aD={}},"__aG<dragfinish>"(e){e.stopPropagation();let a=this;a.__aB!=a.__aE&&a.__h.trigger({type:"change",days:a.__aB}),delete a.__aD}})});
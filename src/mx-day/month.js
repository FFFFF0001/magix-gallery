define("mx-day/month",["magix","$","mx-dragselect/index"],function(e,a,t){e("mx-dragselect/index");var r=e("magix");r.applyStyle("j",".bF{padding:0;height:38.4px;overflow:hidden;cursor:default;text-indent:-50px;border:none;border-right:1px solid #e6e6e6}.bG{border-right:none}.bH{background-color:#6363e6}");var _=e("$"),n={MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6,SUN:0},d={1:"MON",2:"TUE",3:"WED",4:"THU",5:"FRI",6:"SAT",0:"SUN"},i=function(e,a){return 32-new Date(e,a,32).getDate()},s=function(e,a){e=(e=e||"").slice(0,a);for(var t=0;t<a;t++)e.length<t&&(e+="0");return e},o=function(e){for(var a={},t=e.length;t--;)"1"===e.charAt(t)&&(a[t]=1);return a};t.exports=r.View.extend({tmpl:{html:'<table><tbody><tr mx-guid="g0" mx-view="mx-dragselect/index?selector=td%5Benable%3Dtrue%5D" mx-change="__e()" mx-dragbegin="__aw()" mx-dragfinish="__ax()">1</tr></tbody></table>',subs:[{keys:["days","selected","width"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var a=0;a<31;a++){%><td data-day="<%=a%>" enable="<%=a<$$.days?true:false%>" class="bF<%if($$.selected.charAt(a)===\'1\'){%> bH<%}if(a==30){%> bG<%}%>" style="width:<%=$$.width%>px"><%=a+1%></td><%}%>',s:"1"}]},init:function(e){var a=this;a.assign(e),a.__h=_("#"+a.id)},assign:function(e){var a=this,t=i(e.year,e.month);return a.__ap=t,a.__aq=e.year,a.__ar=e.month,a.__as=s(e.selected,t),a.__at=e.width,!0},__am:function(e,a){for(var t=this,r=t.__as,_=t.__aq,d=t.__ar,i=t.__ap,s=n[e],o=1;o<=i;o++)new Date(_,d,o).getDay()===s&&(r=r.slice(0,o-1)+(a?"1":"0")+r.slice(o));t.__as=r,t.render(!0)},render:function(e){var a=this;a.$u.digest({width:a.__at,days:a.__ap,selected:a.__as}),a.__au=o(a.__as),a.__h.trigger({type:"sync",ignoreSync:e,value:a.__as})},__aj:function(){for(var e=this,a=e.__as,t=e.__aq,_=e.__ar,n=e.__ap,i={},s=1;s<=n;s++)if("0"===a.charAt(s-1)){var o=new Date(t,_,s);i[d[o.getDay()]]=1}return r.keys(i)},"__e<change,click>":function(e){e.stopPropagation();var a=_(e.node),t=this,n=a.data("day"),d=t.__au;"add"==e.action?d[n]?(a.removeClass("bH"),delete d[n],"drag"==e.mode&&(t.__av[n]=1)):(a.addClass("bH"),d[n]=1,"drag"==e.mode&&delete t.__av[n]):"remove"==e.action&&(t.__av[n]?(a.addClass("bH"),d[n]=1,"drag"==e.mode&&delete t.__av[n]):(a.removeClass("bH"),delete d[n],"drag"==e.mode&&(t.__av[n]=1)));for(var i=t.__ap,s="",o=0;o<i;o++)r.has(d,o)?s+="1":s+="0";t.__as=s,t.__h.trigger({type:"change",value:s})},"__aw<dragbegin>":function(e){e.stopPropagation(),this.__av={}},"__ax<dragfinish>":function(e){e.stopPropagation(),delete this.__av}},{Weeks:n})});
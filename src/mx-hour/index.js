define("mx-hour/index",["magix","$","mx-dragselect/index"],(e,d,a)=>{e("mx-dragselect/index");let _=e("magix");_.applyStyle("_u","._dn{padding:0;height:38.4px;overflow:hidden;cursor:default;min-width:1px}._do{opacity:0}._dp{background-color:#f37b63}._dq{border:none}._dr{border-right:1px solid #e6e6e6}");let t=e("$");a.exports=_.View.extend({tmpl:{html:'<tr mx-guid="g0" mx-change="__e()" mx-dragbegin="__aF()" mx-dragfinish="__aG()" mx-view="mx-dragselect/index">1</tr>',subs:[{keys:["noBorder"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var _=0;_<24;_++){%><td class="_dn<%if($$.noBorder){%> _dq<%if(_<23){%> _dr<%}}%>" data-hour="<%!_%>"><span class="_do"><%!(\'0\'+_).slice(-2)%></span></td><%}%>',s:"1"}]},init(e){this.__cx=e.range,this.__cy="no"==e.border},render(){let e=this;e.updater.digest({noBorder:e.__cy});let d=t("#"+e.id);e.__h=d,e.__cv=d.find("._dn"),e.__cx&&e.val(e.__cx)},val(e){let d=this,a=d.__cv;if(e||""===e){let _={};a.each((d,a)=>{a=t(a),"1"==e.charAt(d)?(_[d]=1,a.addClass("_dp")):a.removeClass("_dp")}),d.__aC=_}else e=[],a.each((d,a)=>{a=t(a),d<24&&e.push(a.hasClass("_dp")?1:0)}),e=e.join("");return e},__u(){let e=this,d=e.__aE,a=e.val();d!=a&&e.__h.val(a).trigger({type:"change",range:a})},"__e<change,click>"(e){e.stopPropagation();let d=t(e.node),a=this,_=d.data("hour"),r=a.__aC,i=a.__aD;"add"==e.action?r[_]?(d.removeClass("_dp"),delete r[_],"drag"==e.mode&&(i[_]=1)):(d.addClass("_dp"),r[_]=1,"drag"==e.mode&&delete i[_]):"remove"==e.action&&(i[_]?(d.addClass("_dp"),r[_]=1,"drag"==e.mode&&delete i[_]):(d.removeClass("_dp"),delete r[_],"drag"==e.mode&&(i[_]=1))),"click"==e.mode&&a.__u()},"__aF<dragbegin>"(e){e.stopPropagation();this.__aE=this.val(),this.__aD={}},"__aG<dragfinish>"(e){e.stopPropagation();this.__u(),delete this.__aD}},{improve(e){e||(e="");let d=0;for(;d<24;)e.charAt(d)||(e+="0"),d++;return e}})});
define("mx-hour/index",["magix","$","mx-dragselect/index"],function(a,e,d){a("mx-dragselect/index");var r=a("magix");r.applyStyle("_u","._dl{padding:0;height:38.4px;overflow:hidden;cursor:default;min-width:1px}._dm{opacity:0}._dn{background-color:#8282e6}._do{border:none}._dp{border-right:1px solid #e6e6e6}");var n=a("$");d.exports=r.View.extend({tmpl:{html:'<tr mx-guid="g0" mx-change="__e()" mx-dragbegin="__ay()" mx-dragfinish="__az()" mx-view="mx-dragselect/index">1</tr>',subs:[{keys:["noBorder"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var a=0;a<24;a++){%><td class="_dl<%if($$.noBorder){%> _do<%if(a<23){%> _dp<%}}%>" data-hour="<%!a%>"><span class="_dm"><%!(\'0\'+a).slice(-2)%></span></td><%}%>',s:"1"}]},init:function(a){var e=this;e.__cq=a.range,e.__cr="no"==a.border},render:function(){var a=this;a.updater.digest({noBorder:a.__cr});var e=n("#"+a.id);a.__h=e,a.__co=e.find("._dl"),a.__cq&&a.val(a.__cq)},val:function(a){var e=this,d=e.__co;if(a||""===a){var r={};d.each(function(e,d){d=n(d),"1"==a.charAt(e)?(r[e]=1,d.addClass("_dn")):d.removeClass("_dn")}),e.__av=r}else a=[],d.each(function(e,d){d=n(d),e<24&&a.push(d.hasClass("_dn")?1:0)}),a=a.join("");return a},__u:function(){var a=this,e=a.__ax,d=a.val();e!=d&&a.__h.trigger({type:"change",range:d})},"__e<change,click>":function(a){a.stopPropagation();var e=n(a.node),d=this,r=e.data("hour"),_=d.__av,o=d.__aw;"add"==a.action?_[r]?(e.removeClass("_dn"),delete _[r],"drag"==a.mode&&(o[r]=1)):(e.addClass("_dn"),_[r]=1,"drag"==a.mode&&delete o[r]):"remove"==a.action&&(o[r]?(e.addClass("_dn"),_[r]=1,"drag"==a.mode&&delete o[r]):(e.removeClass("_dn"),delete _[r],"drag"==a.mode&&(o[r]=1))),"click"==a.mode&&d.__u()},"__ay<dragbegin>":function(a){a.stopPropagation();var e=this;e.__ax=e.val(),e.__aw={}},"__az<dragfinish>":function(a){a.stopPropagation();var e=this;e.__u(),delete e.__aw}},{improve:function(a){a||(a="");for(var e=0;e<24;)a.charAt(e)||(a+="0"),e++;return a}})});
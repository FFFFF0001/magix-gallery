define("mx-hour/index",["magix","$","mx-dragselect/index"],function(a,e,d){a("mx-dragselect/index");var r=a("magix");r.applyStyle("_u","._dj{padding:0;height:38.4px;overflow:hidden;cursor:default;min-width:1px}._dk{opacity:0}._dl{background-color:#8282e6}._dm{border:none}._dn{border-right:1px solid #e6e6e6}");var _=a("$");d.exports=r.View.extend({tmpl:{html:'<tr mx-guid="g0" mx-change="__e()" mx-dragbegin="__ay()" mx-dragfinish="__az()" mx-view="mx-dragselect/index">1</tr>',subs:[{keys:["border"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var a=0;a<24;a++){%><td class="_dj<%if($$.border==\'no\'){%> _dm<%if(a<23){%> _dn<%}}%>" data-hour="<%!a%>"><span class="_dk"><%!(\'0\'+a).slice(-2)%></span></td><%}%>',s:"1"}]},init:function(a){var e=this;e.__co=a.range,e.__cp=a.border},render:function(){var a=this;a.updater.digest({border:a.__cp});var e=_("#"+a.id);a.__h=e,a.__cm=e.find("._dj"),a.__co&&a.val(a.__co)},val:function(a){var e=this,d=e.__cm;if(a||""===a){var r={};d.each(function(e,d){d=_(d),"1"==a.charAt(e)?(r[e]=1,d.addClass("_dl")):d.removeClass("_dl")}),e.__av=r}else a=[],d.each(function(e,d){d=_(d),e<24&&a.push(d.hasClass("_dl")?1:0)}),a=a.join("");return a},__u:function(){var a=this,e=a.__ax,d=a.val();e!=d&&a.__h.trigger({type:"change",range:d})},"__e<change,click>":function(a){a.stopPropagation();var e=_(a.node),d=this,r=e.data("hour"),i=d.__av,t=d.__aw;"add"==a.action?i[r]?(e.removeClass("_dl"),delete i[r],"drag"==a.mode&&(t[r]=1)):(e.addClass("_dl"),i[r]=1,"drag"==a.mode&&delete t[r]):"remove"==a.action&&(t[r]?(e.addClass("_dl"),i[r]=1,"drag"==a.mode&&delete t[r]):(e.removeClass("_dl"),delete i[r],"drag"==a.mode&&(t[r]=1))),"click"==a.mode&&d.__u()},"__ay<dragbegin>":function(a){a.stopPropagation();var e=this;e.__ax=e.val(),e.__aw={}},"__az<dragfinish>":function(a){a.stopPropagation();var e=this;e.__u(),delete e.__aw}},{improve:function(a){a||(a="");for(var e=0;e<24;)a.charAt(e)||(a+="0"),e++;return a}})});
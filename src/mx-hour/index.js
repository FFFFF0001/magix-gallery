define("mx-hour/index",["magix","../mx-dragdrop/index","$"],function(d,i,e){var t=d("magix");t.applyStyle("t",".dl{height:60px;padding:5px 0}.dm{position:relative;width:4%;height:100%}.dm,.dn{display:inline-block}.dn{width:1px;height:20%;border-left:1px solid #e6e6e6;position:absolute;left:0;top:30%}.do,.dp .dn{height:40%}.do{position:absolute;left:0;top:30%;display:inline-block;width:100%;z-index:1}.dq .do{background-color:#6363e6;opacity:.3}.dr,.ds{display:none;position:absolute;background-color:#6363e6;font-size:10px;width:36px;height:15px;text-align:center;color:#fff;border-radius:2px;z-index:2}.ds{left:-18px;top:35px}.dr{right:-18px;top:0}.dt{position:absolute;left:50%;width:0;height:0;margin-left:-3px;border-left:3px solid transparent;border-right:3px solid transparent}.ds .dt{border-bottom:3px solid #6363e6;top:-3px}.dr .dt{border-top:3px solid #6363e6;bottom:-3px}");var a=d("../mx-dragdrop/index"),s=d("$");e.exports=t.View.extend({tmpl:{html:'<div class="dl"><%for(var a=0;a<24;a++){%><div class="dm<%if(a%6===0){%> dp<%}%>" mx-mousedown="__aG()" mx-mouseover="__cq()"><div class="dn"></div><div class="do"></div><div class="ds"><div class="dt"></div><span><%=a%>:00</span></div><div class="dr"><div class="dt"></div><span><%=a+1%>:00</span></div></div><%}%><div class="dm dp"><div class="dn"></div></div></div>',subs:[]},init:function(d){this.__cn=d.range},render:function(){var d=this;d.updater.digest(),d.__cl=s("#"+d.id+" .dm"),d.__cn&&d.val(d.__cn)},__co:function(){this.__cl.each(function(d,i){var e=(i=s(i)).find(".ds"),t=i.find(".dr");i.hasClass("dq")?(e[i.prev().hasClass("dq")?"hide":"show"](),t[i.next().hasClass("dq")?"hide":"show"]()):(e.hide(),t.hide())})},val:function(d){var i=this,e=i.__cl;return d||""===d?(e.each(function(i,e){e=s(e),"1"==d.charAt(i)?e.addClass("dq"):e.removeClass("dq")}),i.__co()):(d=[],e.each(function(i,e){e=s(e),i<24&&d.push(e.hasClass("dq")?1:0)}),d=d.join("")),d},"__aG<mousedown>":function(d){var i=this,e=s(d.eventTarget),t=e.hasClass("dq");e.toggleClass("dq"),i.__co(),s("#"+i.id).trigger({type:"change",range:i.val()}),i.__cp=t,i.__aI=!0,a.begin(d.target,function(){a.clear()},function(){delete i.__aI})},"__cq<mouseover>":function(d){var i=this;i.__aI&&!t.inside(d.relatedTarget,d.eventTarget)&&(s(d.eventTarget)[i.__cp?"removeClass":"addClass"]("dq"),i.__co(),s("#"+i.id).trigger({type:"change",range:i.val()}))}},{improve:function(d){d||(d="");for(var i=0;i<24;)d.charAt(i)||(d+="0"),i++;return d}})});
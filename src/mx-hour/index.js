define("mx-hour/index",["magix","$","mx-dragselect/index"],function(a,e,d){a("mx-dragselect/index");var r=a("magix");r.applyStyle("_u","._do{padding:0;height:38.4px;overflow:hidden;cursor:default;min-width:1px}._dp{opacity:0}._dq{background-color:#8282e6}._dr{border:none}._ds{border-right:1px solid #e6e6e6}");var _=a("$");d.exports=r.View.extend({tmpl:{html:'<tr mx-guid="g0" mx-change="__f()" mx-dragbegin="__aJ()" mx-dragfinish="__aK()" mx-view="mx-dragselect/index">1</tr>',subs:[{keys:["noBorder"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var a=0;a<24;a++){%><td class="_do<%if($$.noBorder){%> _dr<%if(a<23){%> _ds<%}}%>" data-hour="<%!a%>"><span class="_dp"><%!(\'0\'+a).slice(-2)%></span></td><%}%>',s:"1"}]},init:function(a){var e=this;e.__cB=a.range,e.__cC="no"==a.border},render:function(){var a=this;a.updater.digest({noBorder:a.__cC});var e=_("#"+a.id);a.__i=e,a.__cz=e.find("._do"),a.__cB&&a.val(a.__cB)},val:function(a){var e=this,d=e.__cz;if(a||""===a){var r={};d.each(function(e,d){d=_(d),"1"==a.charAt(e)?(r[e]=1,d.addClass("_dq")):d.removeClass("_dq")}),e.__aG=r}else a=[],d.each(function(e,d){d=_(d),e<24&&a.push(d.hasClass("_dq")?1:0)}),a=a.join("");return a},__v:function(){var a=this,e=a.__aI,d=a.val();e!=d&&a.__i.trigger({type:"change",range:d})},"__f<change,click>":function(a){a.stopPropagation();var e=_(a.node),d=this,r=e.data("hour"),i=d.__aG,o=d.__aH;"add"==a.action?i[r]?(e.removeClass("_dq"),delete i[r],"drag"==a.mode&&(o[r]=1)):(e.addClass("_dq"),i[r]=1,"drag"==a.mode&&delete o[r]):"remove"==a.action&&(o[r]?(e.addClass("_dq"),i[r]=1,"drag"==a.mode&&delete o[r]):(e.removeClass("_dq"),delete i[r],"drag"==a.mode&&(o[r]=1))),"click"==a.mode&&d.__v()},"__aJ<dragbegin>":function(a){a.stopPropagation();var e=this;e.__aI=e.val(),e.__aH={}},"__aK<dragfinish>":function(a){a.stopPropagation();var e=this;e.__v(),delete e.__aH}},{improve:function(a){a||(a="");for(var e=0;e<24;)a.charAt(e)||(a+="0"),e++;return a}})});
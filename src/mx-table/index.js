define("mx-table/index",["magix","$"],function(e,t,r){var _=e("magix"),i=e("$"),a=/width\s*:\s*(\d+)px/;_.applyStyle("_G","._eM{width:100%;overflow:auto;border:1px solid #e6e6e6;position:relative}._eN,._eO thead,._eP{background-color:#fff}._eN,._eP{position:absolute;top:1px;width:auto;z-index:1}._eQ{border:none}._eN{left:1px}._eP{right:1px}._eR,._eR thead{-webkit-box-shadow:6px 0 6px -4px rgba(0,0,0,.2);box-shadow:6px 0 6px -4px rgba(0,0,0,.2)}._eS,._eS thead{-webkit-box-shadow:-6px 0 6px -4px rgba(0,0,0,.2);box-shadow:-6px 0 6px -4px rgba(0,0,0,.2)}"),r.exports=_.View.extend({init:function(e){var t=this,r=e.rwdRange;t.__er=((r||[2,-1])+"").split(","),t.__es=e.sticky+""=="true";var _=i("#"+t.id);t.__h=_,t.__et=_.find("table"),t.__eu=e.rowHoverClass},__ew:function(e,t,r,_,a,s){var d=i('<table id="'+s+'" class="'+e+'"><thead><tr></tr></thead><tbody></tbody></table>');return this.__ev(d,t,r,_,a),d},__ev:function(e,t,r,_,s){for(var d=e.find("thead>tr:first"),n=d.find("th"),h=e.find("tbody"),o=h.find("tr"),f=t;f<r;f++){var l=_.eq(f),c=f-t>=n.length;"true"!==l.attr("fake")&&(i('<th fake="true"/>').css({height:l.outerHeight(),width:l.outerWidth()}).insertBefore(l),c?d.append(l):n.eq(f-t).replaceWith(l))}for(f=0;f<s.length;f++){for(var v=s.eq(f).find("td"),p=f>=o.length,u=void 0,g=(u=p?i("<tr/>"):o.eq(f)).find("td"),b=t;b<r;b++){var w=v.eq(b),l=_.eq(b),x=b-t>=g.length;if("true"!==w.attr("fake")){i('<td fake="true"/>').css({height:w.outerHeight(),width:w.outerWidth()}).insertBefore(w);var y=l.attr("style").match(a);y&&w.css({width:parseInt(y[1])}),x?u.append(w):g.eq(b-t).replaceWith(w)}}p&&h.append(u)}for(f=s.length;f<o.length;f++)o.eq(f).remove()},__ex:function(e,t,r){for(var _=0,i=[],s=t.length;s--;){var d=t.eq(s).attr("style").match(a);d&&(d=parseInt(d[1]),i.push(d),_+=d)}if(_>r)e.css({width:_}),e.find("thead").css({width:_});else{i=i.reverse();for(var s=t.length,n=0;s--;){var h=Math.round(i[s]/_*r);s?n+=h:h=r-n,t.eq(s).css({width:h})}e.css({width:r}),e.find("thead").css({width:r})}},__ey:function(e,t){var r=e.find("tbody>tr:first>td");if(r.length==t.length)for(var _=t.length;_--;){var i=t.eq(_),s=r.eq(_),d=i.attr("style").match(a);d&&s.css({width:d[1]})}},__ez:function(e,t){for(_=e.length;_--;){var r=e.eq(_);"true"!==r.attr("fake")&&r.css({height:r.outerHeight()})}for(var _=t.length;_--;){var i=t.eq(_).find("td"),a=i.eq(0);a.css({height:a.outerHeight()}),(a=i.last()).css({height:a.outerHeight()})}},__eA:function(e){for(var t=0,r=e.find("thead>tr>th"),_=r.length;_--;){var i=r.eq(_).attr("style").match(a);i&&(t+=i=parseInt(i[1]))}e.css({width:t}),e.find("thead").css({width:t})},__eC:function(e,t,r,_,i){var a=this;if(a.__eB)a.__ev(a.__eB,0,e,t,r),a.__eA(a.__eB);else if(e){var s="t_"+a.id+"_left",d=a.__ew(_.attr("class")+" _eN",0,e,t,r,s);d.insertAfter(i),a.__eB=d,a.__eA(d),a.__es&&a.owner.mountVframe(s,"mx-table/isticky")}},__eE:function(e,t,r,_,i){var a=this;if(a.__eD)a.__ev(a.__eD,e+t.length,t.length,t,r),a.__eA(a.__eD);else if(e){var s="t_"+a.id+"_right",d=a.__ew(_.attr("class")+" _eP",e+t.length,t.length,t,r,s);d.insertAfter(i),a.__eD=d,a.__eA(d),a.__es&&a.owner.mountVframe(s,"mx-table/isticky")}},__eJ:function(){var e=this,t=e.__h,r=e.__et,a=e.__eF||r.find("thead>tr:first>th");if(delete e.__eF,!t.hasClass("_eM")){t.wrap('<div class="_af _eO"></div>'),t.addClass("_eM"),e.__eG=t,t.on("scroll",function(){e.__eH()}),e.on("destroy",function(){t.off("scroll")}),r.addClass("_eQ");var s=r.find("tfoot");s.length&&i('<table class="_az"></table>').append(s).insertAfter(t)}e.__ex(r,a,t.width()),e.__ey(r,a);var d=e.__er,n=r.find("tbody>tr");if(e.__ez(a,n),e.__eC(+d[0],a,n,r,t),e.__eE(+d[1],a,n,r,t),e.__es&&!e.__eI){e.__eI=1;var h=r.attr("id");h||r.attr("id",h=_.guid("table_")),e.owner.mountVframe(h,"mx-table/isticky")}},__eH:function(){var e=this,t=e.__eG;if(t){var r=e.__eB,_=e.__eD;if(t.prop("clientWidth")<t.prop("scrollWidth")){if(r){t.prop("scrollLeft")>=10?r.hasClass("_eR")||r.addClass("_eR"):r.hasClass("_eR")&&r.removeClass("_eR")}if(_){t.prop("scrollLeft")<t.prop("scrollWidth")-t.prop("clientWidth")-10?_.hasClass("_eS")||_.addClass("_eS"):_.hasClass("_eS")&&_.removeClass("_eS")}}}},render:function(){var e=this;e.__eJ(),e.__eH()},"$doc<htmlchanged>":function(e){var t=this;if(e.vId==t.owner.pId){var r=t.__et,_=r.find("thead>tr:first>th"),i=r.find("tbody>tr:first>td");_.length!=i.length&&i.length||(t.__eF=_,t.render())}},"$tbody>tr<mouseover,mouseout>":function(e){var t=this,r=t.__eu;if(r){var a=e.eventTarget;if(!_.inside(e.relatedTarget,a)){var s=i(a).parents("tbody").find("tr"),d=s.index(a);s=t.__et.find("tbody>tr");var n="mouseover"==e.type?"addClass":"removeClass";s.eq(d)[n](r);var h=t.__eB;h&&(s=h.find("tbody>tr")).eq(d)[n](r),(h=t.__eD)&&(s=h.find("tbody>tr")).eq(d)[n](r)}}},"$win<resize>":function(){var e=this,t=e.__h,r=e.__et,_=r.find("thead>tr:first>th");this.__ex(r,_,t.width()),this.__eH()}})});
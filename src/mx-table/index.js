define("mx-table/index",["magix","$"],function(e,t,r){var _=e("magix"),i=e("$"),a=/width\s*:\s*(\d+)px/;_.applyStyle("_G","._eO{width:100%;overflow:auto;border:1px solid #e6e6e6;position:relative}._eP,._eQ thead,._eR{background-color:#fff}._eP,._eR{position:absolute;top:1px;width:auto;z-index:1}._eS{border:none}._eP{left:1px}._eR{right:1px}._eT,._eT thead{-webkit-box-shadow:6px 0 6px -4px rgba(0,0,0,.2);box-shadow:6px 0 6px -4px rgba(0,0,0,.2)}._eU,._eU thead{-webkit-box-shadow:-6px 0 6px -4px rgba(0,0,0,.2);box-shadow:-6px 0 6px -4px rgba(0,0,0,.2)}"),r.exports=_.View.extend({init:function(e){var t=this,r=e.rwdRange;t.__eC=((r||[2,-1])+"").split(","),t.__et=e.sticky+""=="true";var _=i("#"+t.id);t.__h=_,t.__eA=_.find("table"),t.__eu=e.rowHoverClass},__eE:function(e,t,r,_,a,s){var d=i('<table id="'+s+'" class="'+e+'"><thead><tr></tr></thead><tbody></tbody></table>');return this.__eD(d,t,r,_,a),d},__eD:function(e,t,r,_,s){for(var d=e.find("thead>tr:first"),n=d.find("th"),h=e.find("tbody"),o=h.find("tr"),f=t;f<r;f++){var l=_.eq(f),c=f-t>=n.length;"true"!==l.attr("fake")&&(i('<th fake="true"/>').css({height:l.outerHeight(),width:l.outerWidth()}).insertBefore(l),c?d.append(l):n.eq(f-t).replaceWith(l))}for(f=0;f<s.length;f++){for(var v=s.eq(f).find("td"),p=f>=o.length,u=void 0,g=(u=p?i("<tr/>"):o.eq(f)).find("td"),w=t;w<r;w++){var x=v.eq(w),l=_.eq(w),b=w-t>=g.length;if("true"!==x.attr("fake")){i('<td fake="true"/>').css({height:x.outerHeight(),width:x.outerWidth()}).insertBefore(x);var y=l.attr("style").match(a);y&&x.css({width:parseInt(y[1])}),b?u.append(x):g.eq(w-t).replaceWith(x)}}p&&h.append(u)}for(f=s.length;f<o.length;f++)o.eq(f).remove()},__eF:function(e,t,r){for(var _=0,i=[],s=t.length;s--;){var d=t.eq(s).attr("style");if(d){var n=d.match(a);n&&(n=parseInt(n[1]),i.push(n),_+=n)}}if(_>r)e.css({width:_}),e.find("thead").css({width:_});else{i=i.reverse();for(var s=t.length,h=0;s--;){var o=Math.round(i[s]/_*r);s?h+=o:o=r-h,t.eq(s).css({width:o})}e.css({width:r}),e.find("thead").css({width:r})}},__eG:function(e,t){var r=e.find("tbody>tr:first>td");if(r.length==t.length)for(var _=t.length;_--;){var i=t.eq(_),s=r.eq(_),d=i.attr("style").match(a);d&&s.css({width:d[1]})}},__eB:function(e,t){for(_=e.length;_--;){var r=e.eq(_);"true"!==r.attr("fake")&&r.css({height:r.outerHeight()})}for(var _=t.length;_--;){var i=t.eq(_).find("td"),a=i.eq(0);a.css({height:a.outerHeight()}),(a=i.last()).css({height:a.outerHeight()})}},__eH:function(e){for(var t=0,r=e.find("thead>tr>th"),_=r.length;_--;){var i=r.eq(_).attr("style").match(a);i&&(t+=i=parseInt(i[1]))}e.css({width:t}),e.find("thead").css({width:t})},__eI:function(e,t,r,_,i){var a=this;if(a.__ew)a.__eD(a.__ew,0,e,t,r),a.__eH(a.__ew);else if(e){var s="t_"+a.id+"_left",d=a.__eE(_.attr("class")+" _eP",0,e,t,r,s);d.insertAfter(i),a.__ew=d,a.__eH(d),a.__et&&a.owner.mountVframe(s,"mx-table/isticky")}},__eJ:function(e,t,r,_,i){var a=this;if(a.__ex)a.__eD(a.__ex,e+t.length,t.length,t,r),a.__eH(a.__ex);else if(e){var s="t_"+a.id+"_right",d=a.__eE(_.attr("class")+" _eR",e+t.length,t.length,t,r,s);d.insertAfter(i),a.__ex=d,a.__eH(d),a.__et&&a.owner.mountVframe(s,"mx-table/isticky")}},__eM:function(){var e=this,t=e.__h,r=e.__eA,a=e.__eK||r.find("thead>tr:first>th");if(delete e.__eK,!t.hasClass("_eO")){t.wrap('<div class="_af _eQ"></div>'),t.addClass("_eO"),e.__ev=t,t.on("scroll",function(){e.__ey()}),e.on("destroy",function(){t.off("scroll")}),r.addClass("_eS");var s=r.find("tfoot");s.length&&i('<table class="_az"></table>').append(s).insertAfter(t)}e.__eF(r,a,t.width()),e.__eG(r,a);var d=e.__eC,n=r.find("tbody>tr");if(e.__eB(a,n),e.__eI(+d[0],a,n,r,t),e.__eJ(+d[1],a,n,r,t),e.__et&&!e.__eL){e.__eL=1;var h=r.attr("id");h||r.attr("id",h=_.guid("table_")),e.owner.mountVframe(h,"mx-table/isticky")}},__ey:function(){var e=this,t=e.__ev;if(t){var r=e.__ew,_=e.__ex;if(t.prop("clientWidth")<t.prop("scrollWidth")){if(r){t.prop("scrollLeft")>=10?r.hasClass("_eT")||r.addClass("_eT"):r.hasClass("_eT")&&r.removeClass("_eT")}if(_){t.prop("scrollLeft")<t.prop("scrollWidth")-t.prop("clientWidth")-10?_.hasClass("_eU")||_.addClass("_eU"):_.hasClass("_eU")&&_.removeClass("_eU")}}}},render:function(){var e=this;e.__eM(),e.__ey()},"$doc<htmlchanged>":function(e){var t=this;if(e.vId==t.owner.pId){var r=t.__eA,_=r.find("thead>tr:first>th"),i=r.find("tbody>tr:first>td");_.length!=i.length&&i.length||(t.__eK=_,t.render())}},"$tbody>tr<mouseover,mouseout>":function(e){var t=this,r=t.__eu;if(r){var a=e.eventTarget;if(!_.inside(e.relatedTarget,a)){var s=i(a).parents("tbody").find("tr"),d=s.index(a);s=t.__eA.find("tbody>tr");var n="mouseover"==e.type?"addClass":"removeClass";s.eq(d)[n](r);var h=t.__ew;h&&(s=h.find("tbody>tr")).eq(d)[n](r),(h=t.__ex)&&(s=h.find("tbody>tr")).eq(d)[n](r)}}},"$win<resize>":function(){var e=this,t=e.__h,r=e.__eA,_=r.find("thead>tr:first>th");this.__eF(r,_,t.width()),this.__ey()}})});
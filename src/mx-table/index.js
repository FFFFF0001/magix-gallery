define("mx-table/index",["magix","$"],(e,t,_)=>{let i=e("magix"),s=e("$"),l=/width\s*:\s*(\d+)px/;i.applyStyle("_H","._eS{width:100%;overflow:auto;border:1px solid #e6e6e6;position:relative}._eT,._eU thead,._eV{background-color:#fff}._eT,._eV{position:absolute;top:1px;width:auto;z-index:1}._eW{border:none}._eT{left:1px}._eV{right:1px}._eX,._eX thead{-webkit-box-shadow:6px 0 6px -4px rgba(0,0,0,.2);box-shadow:6px 0 6px -4px rgba(0,0,0,.2)}._eY,._eY thead{-webkit-box-shadow:-6px 0 6px -4px rgba(0,0,0,.2);box-shadow:-6px 0 6px -4px rgba(0,0,0,.2)}"),_.exports=i.View.extend({init(e){let t=this,_=e.rwdRange;t.__eQ=((_||[2,-1])+"").split(","),t.__eH=e.sticky+""=="true";let i=s("#"+t.id);t.__h=i,t.__eO=i.find("table"),t.__eI=e.rowHoverClass},__eS(e,t,_,i,l,r){let d=s('<table id="'+r+'" class="'+e+'"><thead><tr></tr></thead><tbody></tbody></table>');return this.__eR(d,t,_,i,l),d},__eR(e,t,_,i,r){let d=e.find("thead>tr:first"),h=d.find("th"),a=e.find("tbody"),o=a.find("tr");for(let e=t;e<_;e++){let _=i.eq(e),l=e-t>=h.length;"true"!==_.attr("fake")&&(s('<th fake="true"/>').css({height:_.outerHeight(),width:_.outerWidth()}).insertBefore(_),l?d.append(_):h.eq(e-t).replaceWith(_))}for(let e=0;e<r.length;e++){let d,h=r.eq(e).find("td"),n=e>=o.length,f=(d=n?s("<tr/>"):o.eq(e)).find("td");for(let e=t;e<_;e++){let _=h.eq(e),r=i.eq(e),a=e-t>=f.length;if("true"!==_.attr("fake")){s('<td fake="true"/>').css({height:_.outerHeight(),width:_.outerWidth()}).insertBefore(_);let i=r.attr("style").match(l);i&&_.css({width:parseInt(i[1])}),a?d.append(_):f.eq(e-t).replaceWith(_)}}n&&a.append(d)}for(let e=r.length;e<o.length;e++)o.eq(e).remove()},__eT(e,t,_){let i=0,s=[];for(let e=t.length;e--;){let _=t.eq(e).attr("style");if(_){let e=_.match(l);e&&(e=parseInt(e[1]),s.push(e),i+=e)}}if(i>_)e.css({width:i}),e.find("thead").css({width:i});else{s=s.reverse();for(let e=t.length,l=0;e--;){let r=Math.round(s[e]/i*_);e?l+=r:r=_-l,t.eq(e).css({width:r})}e.css({width:_}),e.find("thead").css({width:_})}},__eU(e,t){let _=e.find("tbody>tr:first>td");if(_.length==t.length)for(let e=t.length;e--;){let i=t.eq(e),s=_.eq(e),r=i.attr("style").match(l);r&&s.css({width:r[1]})}},__eP(e,t){for(let t=e.length;t--;){let _=e.eq(t);"true"!==_.attr("fake")&&_.css({height:_.outerHeight()})}for(let e=t.length;e--;){let _=t.eq(e).find("td"),i=_.eq(0);i.css({height:i.outerHeight()}),(i=_.last()).css({height:i.outerHeight()})}},__eV(e){let t=0,_=e.find("thead>tr>th");for(let e=_.length;e--;){let i=_.eq(e).attr("style").match(l);i&&(t+=i=parseInt(i[1]))}e.css({width:t}),e.find("thead").css({width:t})},__eW(e,t,_,i,s){let l=this;if(l.__eK)l.__eR(l.__eK,0,e,t,_),l.__eV(l.__eK);else if(e){let r="t_"+l.id+"_left",d=l.__eS(i.attr("class")+" _eT",0,e,t,_,r);d.insertAfter(s),l.__eK=d,l.__eV(d),l.__eH&&l.owner.mountVframe(r,"mx-table/isticky")}},__eX(e,t,_,i,s){let l=this;if(l.__eL)l.__eR(l.__eL,e+t.length,t.length,t,_),l.__eV(l.__eL);else if(e){let r="t_"+l.id+"_right",d=l.__eS(i.attr("class")+" _eV",e+t.length,t.length,t,_,r);d.insertAfter(s),l.__eL=d,l.__eV(d),l.__eH&&l.owner.mountVframe(r,"mx-table/isticky")}},__f_(){let e=this,t=e.__h,_=e.__eO,l=e.__eY||_.find("thead>tr:first>th");if(delete e.__eY,!t.hasClass("_eS")){t.wrap('<div class="_ag _eU"></div>'),t.addClass("_eS"),e.__eJ=t,t.on("scroll",()=>{e.__eM()}),e.on("destroy",()=>{t.off("scroll")}),_.addClass("_eW");let i=_.find("tfoot");i.length&&s('<table class="_aA"></table>').append(i).insertAfter(t)}e.__eT(_,l,t.width()),e.__eU(_,l);let r=e.__eQ,d=_.find("tbody>tr");if(e.__eP(l,d),e.__eW(+r[0],l,d,_,t),e.__eX(+r[1],l,d,_,t),e.__eH&&!e.__eZ){e.__eZ=1;let t=_.attr("id");t||_.attr("id",t=i.guid("table_")),e.owner.mountVframe(t,"mx-table/isticky")}},__eM(){let e=this.__eJ;if(!e)return;let t=this.__eK,_=this.__eL;if(e.prop("clientWidth")<e.prop("scrollWidth")){if(t){e.prop("scrollLeft")>=10?t.hasClass("_eX")||t.addClass("_eX"):t.hasClass("_eX")&&t.removeClass("_eX")}if(_){e.prop("scrollLeft")<e.prop("scrollWidth")-e.prop("clientWidth")-10?_.hasClass("_eY")||_.addClass("_eY"):_.hasClass("_eY")&&_.removeClass("_eY")}}},render(){this.__f_(),this.__eM()},"$doc<htmlchanged>"(e){let t=this;if(e.vId==t.owner.pId){let e=t.__eO,_=e.find("thead>tr:first>th"),i=e.find("tbody>tr:first>td");_.length!=i.length&&i.length||(t.__eY=_,t.render())}},"$tbody>tr<mouseover,mouseout>"(e){let t=this,_=t.__eI;if(_){let l=e.eventTarget;if(!i.inside(e.relatedTarget,l)){let i=s(l).parents("tbody").find("tr"),r=i.index(l);i=t.__eO.find("tbody>tr");let d="mouseover"==e.type?"addClass":"removeClass";i.eq(r)[d](_);let h=t.__eK;h&&(i=h.find("tbody>tr")).eq(r)[d](_),(h=t.__eL)&&(i=h.find("tbody>tr")).eq(r)[d](_)}}},"$win<resize>"(){let e=this.__h,t=this.__eO,_=t.find("thead>tr:first>th");this.__eT(t,_,e.width()),this.__eM()}})});
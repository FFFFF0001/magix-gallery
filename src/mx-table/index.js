define("mx-table/index",["magix","$"],function(e,t,r){var _=e("magix"),i=e("$"),a=/width\s*:\s*(\d+)px/;_.applyStyle("_G","._eR{width:100%;overflow:auto;border:1px solid #e6e6e6;position:relative}._eS,._eT thead,._eU{background-color:#fff}._eS,._eU{position:absolute;top:1px;width:auto;z-index:1}._eV{border:none}._eS{left:1px}._eU{right:1px}._eW,._eW thead{-webkit-box-shadow:6px 0 6px -4px rgba(0,0,0,.2);box-shadow:6px 0 6px -4px rgba(0,0,0,.2)}._eX,._eX thead{-webkit-box-shadow:-6px 0 6px -4px rgba(0,0,0,.2);box-shadow:-6px 0 6px -4px rgba(0,0,0,.2)}"),r.exports=_.View.extend({init:function(e){var t=this,r=e.rwdRange;t.__eM=((r||[2,-1])+"").split(","),t.__eD=e.sticky+""=="true";var _=i("#"+t.id);t.__h=_,t.__eK=_.find("table"),t.__eE=e.rowHoverClass},__eO:function(e,t,r,_,a,s){var d=i('<table id="'+s+'" class="'+e+'"><thead><tr></tr></thead><tbody></tbody></table>');return this.__eN(d,t,r,_,a),d},__eN:function(e,t,r,_,s){for(var d=e.find("thead>tr:first"),n=d.find("th"),h=e.find("tbody"),o=h.find("tr"),f=t;f<r;f++){var l=_.eq(f),c=f-t>=n.length;"true"!==l.attr("fake")&&(i('<th fake="true"/>').css({height:l.outerHeight(),width:l.outerWidth()}).insertBefore(l),c?d.append(l):n.eq(f-t).replaceWith(l))}for(f=0;f<s.length;f++){for(var v=s.eq(f).find("td"),p=f>=o.length,g=void 0,u=(g=p?i("<tr/>"):o.eq(f)).find("td"),b=t;b<r;b++){var w=v.eq(b),l=_.eq(b),x=b-t>=u.length;if("true"!==w.attr("fake")){i('<td fake="true"/>').css({height:w.outerHeight(),width:w.outerWidth()}).insertBefore(w);var m=l.attr("style").match(a);m&&w.css({width:parseInt(m[1])}),x?g.append(w):u.eq(b-t).replaceWith(w)}}p&&h.append(g)}for(f=s.length;f<o.length;f++)o.eq(f).remove()},__eP:function(e,t,r){for(var _=0,i=[],s=t.length;s--;){var d=t.eq(s).attr("style");if(d){var n=d.match(a);n&&(n=parseInt(n[1]),i.push(n),_+=n)}}if(_>r)e.css({width:_}),e.find("thead").css({width:_});else{i=i.reverse();for(var s=t.length,h=0;s--;){var o=Math.round(i[s]/_*r);s?h+=o:o=r-h,t.eq(s).css({width:o})}e.css({width:r}),e.find("thead").css({width:r})}},__eQ:function(e,t){var r=e.find("tbody>tr:first>td");if(r.length==t.length)for(var _=t.length;_--;){var i=t.eq(_),s=r.eq(_),d=i.attr("style").match(a);d&&s.css({width:d[1]})}},__eL:function(e,t){for(_=e.length;_--;){var r=e.eq(_);"true"!==r.attr("fake")&&r.css({height:r.outerHeight()})}for(var _=t.length;_--;){var i=t.eq(_).find("td"),a=i.eq(0);a.css({height:a.outerHeight()}),(a=i.last()).css({height:a.outerHeight()})}},__eR:function(e){for(var t=0,r=e.find("thead>tr>th"),_=r.length;_--;){var i=r.eq(_).attr("style").match(a);i&&(t+=i=parseInt(i[1]))}e.css({width:t}),e.find("thead").css({width:t})},__eS:function(e,t,r,_,i){var a=this;if(a.__eG)a.__eN(a.__eG,0,e,t,r),a.__eR(a.__eG);else if(e){var s="t_"+a.id+"_left",d=a.__eO(_.attr("class")+" _eS",0,e,t,r,s);d.insertAfter(i),a.__eG=d,a.__eR(d),a.__eD&&a.owner.mountVframe(s,"mx-table/isticky")}},__eT:function(e,t,r,_,i){var a=this;if(a.__eH)a.__eN(a.__eH,e+t.length,t.length,t,r),a.__eR(a.__eH);else if(e){var s="t_"+a.id+"_right",d=a.__eO(_.attr("class")+" _eU",e+t.length,t.length,t,r,s);d.insertAfter(i),a.__eH=d,a.__eR(d),a.__eD&&a.owner.mountVframe(s,"mx-table/isticky")}},__eW:function(){var e=this,t=e.__h,r=e.__eK,a=e.__eU||r.find("thead>tr:first>th");if(delete e.__eU,!t.hasClass("_eR")){t.wrap('<div class="_ag _eT"></div>'),t.addClass("_eR"),e.__eF=t,t.on("scroll",function(){e.__eI()}),e.on("destroy",function(){t.off("scroll")}),r.addClass("_eV");var s=r.find("tfoot");s.length&&i('<table class="_aA"></table>').append(s).insertAfter(t)}e.__eP(r,a,t.width()),e.__eQ(r,a);var d=e.__eM,n=r.find("tbody>tr");if(e.__eL(a,n),e.__eS(+d[0],a,n,r,t),e.__eT(+d[1],a,n,r,t),e.__eD&&!e.__eV){e.__eV=1;var h=r.attr("id");h||r.attr("id",h=_.guid("table_")),e.owner.mountVframe(h,"mx-table/isticky")}},__eI:function(){var e=this,t=e.__eF;if(t){var r=e.__eG,_=e.__eH;if(t.prop("clientWidth")<t.prop("scrollWidth")){if(r){t.prop("scrollLeft")>=10?r.hasClass("_eW")||r.addClass("_eW"):r.hasClass("_eW")&&r.removeClass("_eW")}if(_){t.prop("scrollLeft")<t.prop("scrollWidth")-t.prop("clientWidth")-10?_.hasClass("_eX")||_.addClass("_eX"):_.hasClass("_eX")&&_.removeClass("_eX")}}}},render:function(){var e=this;e.__eW(),e.__eI()},"$doc<htmlchanged>":function(e){var t=this;if(e.vId==t.owner.pId){var r=t.__eK,_=r.find("thead>tr:first>th"),i=r.find("tbody>tr:first>td");_.length!=i.length&&i.length||(t.__eU=_,t.render())}},"$tbody>tr<mouseover,mouseout>":function(e){var t=this,r=t.__eE;if(r){var a=e.eventTarget;if(!_.inside(e.relatedTarget,a)){var s=i(a).parents("tbody").find("tr"),d=s.index(a);s=t.__eK.find("tbody>tr");var n="mouseover"==e.type?"addClass":"removeClass";s.eq(d)[n](r);var h=t.__eG;h&&(s=h.find("tbody>tr")).eq(d)[n](r),(h=t.__eH)&&(s=h.find("tbody>tr")).eq(d)[n](r)}}},"$win<resize>":function(){var e=this,t=e.__h,r=e.__eK,_=r.find("thead>tr:first>th");this.__eP(r,_,t.width()),this.__eI()}})});
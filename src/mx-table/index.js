define("mx-table/index",["magix","$"],function(e,t,r){var _=e("magix"),i=e("$"),a=/width\s*:\s*(\d+)px/;_.applyStyle("_G","._eR{width:100%;overflow:auto;border:1px solid #e6e6e6;position:relative}._eS,._eT thead,._eU{background-color:#fff}._eS,._eU{position:absolute;top:1px;width:auto;z-index:1}._eV{border:none}._eS{left:1px}._eU{right:1px}._eW,._eW thead{-webkit-box-shadow:6px 0 6px -4px rgba(0,0,0,.2);box-shadow:6px 0 6px -4px rgba(0,0,0,.2)}._eX,._eX thead{-webkit-box-shadow:-6px 0 6px -4px rgba(0,0,0,.2);box-shadow:-6px 0 6px -4px rgba(0,0,0,.2)}"),r.exports=_.View.extend({init:function(e){var t=this,r=e.rwdRange;t.__eN=((r||[2,-1])+"").split(","),t.__eE=e.sticky+""=="true";var _=i("#"+t.id);t.__i=_,t.__eL=_.find("table"),t.__eF=e.rowHoverClass},__eP:function(e,t,r,_,a,s){var d=i('<table id="'+s+'" class="'+e+'"><thead><tr></tr></thead><tbody></tbody></table>');return this.__eO(d,t,r,_,a),d},__eO:function(e,t,r,_,s){for(var d=e.find("thead>tr:first"),n=d.find("th"),o=e.find("tbody"),h=o.find("tr"),f=t;f<r;f++){var l=_.eq(f),c=f-t>=n.length;"true"!==l.attr("fake")&&(i('<th fake="true"/>').css({height:l.outerHeight(),width:l.outerWidth()}).insertBefore(l),c?d.append(l):n.eq(f-t).replaceWith(l))}for(f=0;f<s.length;f++){for(var v=s.eq(f).find("td"),p=f>=h.length,g=void 0,u=(g=p?i("<tr/>"):h.eq(f)).find("td"),b=t;b<r;b++){var w=v.eq(b),l=_.eq(b),x=b-t>=u.length;if("true"!==w.attr("fake")){i('<td fake="true"/>').css({height:w.outerHeight(),width:w.outerWidth()}).insertBefore(w);var m=l.attr("style").match(a);m&&w.css({width:parseInt(m[1])}),x?g.append(w):u.eq(b-t).replaceWith(w)}}p&&o.append(g)}for(f=s.length;f<h.length;f++)h.eq(f).remove()},__eQ:function(e,t,r){for(var _=0,i=[],s=t.length;s--;){var d=t.eq(s).attr("style");if(d){var n=d.match(a);n&&(n=parseInt(n[1]),i.push(n),_+=n)}}if(_>r)e.css({width:_}),e.find("thead").css({width:_});else{i=i.reverse();for(var s=t.length,o=0;s--;){var h=Math.round(i[s]/_*r);s?o+=h:h=r-o,t.eq(s).css({width:h})}e.css({width:r}),e.find("thead").css({width:r})}},__eR:function(e,t){var r=e.find("tbody>tr:first>td");if(r.length==t.length)for(var _=t.length;_--;){var i=t.eq(_),s=r.eq(_),d=i.attr("style").match(a);d&&s.css({width:d[1]})}},__eM:function(e,t){for(_=e.length;_--;){var r=e.eq(_);"true"!==r.attr("fake")&&r.css({height:r.outerHeight()})}for(var _=t.length;_--;){var i=t.eq(_).find("td"),a=i.eq(0);a.css({height:a.outerHeight()}),(a=i.last()).css({height:a.outerHeight()})}},__eS:function(e){for(var t=0,r=e.find("thead>tr>th"),_=r.length;_--;){var i=r.eq(_).attr("style").match(a);i&&(t+=i=parseInt(i[1]))}e.css({width:t}),e.find("thead").css({width:t})},__eT:function(e,t,r,_,i){var a=this;if(a.__eH)a.__eO(a.__eH,0,e,t,r),a.__eS(a.__eH);else if(e){var s="t_"+a.id+"_left",d=a.__eP(_.attr("class")+" _eS",0,e,t,r,s);d.insertAfter(i),a.__eH=d,a.__eS(d),a.__eE&&a.owner.mountVframe(s,"mx-table/isticky")}},__eU:function(e,t,r,_,i){var a=this;if(a.__eI)a.__eO(a.__eI,e+t.length,t.length,t,r),a.__eS(a.__eI);else if(e){var s="t_"+a.id+"_right",d=a.__eP(_.attr("class")+" _eU",e+t.length,t.length,t,r,s);d.insertAfter(i),a.__eI=d,a.__eS(d),a.__eE&&a.owner.mountVframe(s,"mx-table/isticky")}},__eX:function(){var e=this,t=e.__i,r=e.__eL,a=e.__eV||r.find("thead>tr:first>th");if(delete e.__eV,!t.hasClass("_eR")){t.wrap('<div class="_ag _eT"></div>'),t.addClass("_eR"),e.__eG=t,t.on("scroll",function(){e.__eJ()}),e.on("destroy",function(){t.off("scroll")}),r.addClass("_eV");var s=r.find("tfoot");s.length&&i('<table class="_aA"></table>').append(s).insertAfter(t)}e.__eQ(r,a,t.width()),e.__eR(r,a);var d=e.__eN,n=r.find("tbody>tr");if(e.__eM(a,n),e.__eT(+d[0],a,n,r,t),e.__eU(+d[1],a,n,r,t),e.__eE&&!e.__eW){e.__eW=1;var o=r.attr("id");o||r.attr("id",o=_.guid("table_")),e.owner.mountVframe(o,"mx-table/isticky")}},__eJ:function(){var e=this,t=e.__eG;if(t){var r=e.__eH,_=e.__eI;if(t.prop("clientWidth")<t.prop("scrollWidth")){if(r){t.prop("scrollLeft")>=10?r.hasClass("_eW")||r.addClass("_eW"):r.hasClass("_eW")&&r.removeClass("_eW")}if(_){t.prop("scrollLeft")<t.prop("scrollWidth")-t.prop("clientWidth")-10?_.hasClass("_eX")||_.addClass("_eX"):_.hasClass("_eX")&&_.removeClass("_eX")}}}},render:function(){var e=this;e.__eX(),e.__eJ()},"$doc<htmlchanged>":function(e){var t=this;if(e.vId==t.owner.pId){var r=t.__eL,_=r.find("thead>tr:first>th"),i=r.find("tbody>tr:first>td");_.length!=i.length&&i.length||(t.__eV=_,t.render())}},"$tbody>tr<mouseover,mouseout>":function(e){var t=this,r=t.__eF;if(r){var a=e.eventTarget;if(!_.inside(e.relatedTarget,a)){var s=i(a).parents("tbody").find("tr"),d=s.index(a);s=t.__eL.find("tbody>tr");var n="mouseover"==e.type?"addClass":"removeClass";s.eq(d)[n](r);var o=t.__eH;o&&(s=o.find("tbody>tr")).eq(d)[n](r),(o=t.__eI)&&(s=o.find("tbody>tr")).eq(d)[n](r)}}},"$win<resize>":function(){var e=this,t=e.__i,r=e.__eL,_=r.find("thead>tr:first>th");this.__eQ(r,_,t.width()),this.__eJ()}})});
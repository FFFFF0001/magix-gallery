define("mx-table/sticky",["magix","$"],function(_,e,t){var i=_("magix"),n=_("$");t.exports=i.View.extend({init:function(_){var e=this;e.__eK=n("#header").height()||50;var t=n("#"+e.id).parents("_c_"),i=n("#inmain");t.length||i.length||(i=n(window),e.__eK=0);var o=t.parent(),f=function(){e.__eL(o)},r=function(){e.__eL(i)};e.on("destroy",function(){o.off("scroll",f),i.off("scroll",r)}),o.on("scroll",f),i.on("scroll",r),e.__fh=o,e.__fi=t,e.__eM=i,e.__fj=_.zIndex},__eP:function(){var _=this,e=n("#"+_.id).find("table"),t=e.find("thead"),i=t.find("tr").last(),o=e.find("tbody>tr").eq(0),f="ph_"+_.id,r=n("#"+f),s=i.find("th"),h=o.find("td");h.length&&h.length==s.length&&(r.length||(r=n("<caption />").css({border:"solid 1px "+e.css("border-color")}).insertBefore(t).attr("id",f)),t.css({position:"absolute",background:"#fff",zIndex:_.__fj||1})),_.__fk="abs",_.__eN=r,_.__h=e,_.__eO=t,_.__fl=o,_.__fm=h,_.__fn=s},__eT:function(){var _=this,e=n.now();if(!_.__eQ||_.__eQ+3e3<e){_.__eQ=e;var t=_.__h,i=void 0,o=void 0;i=_.__fi.length?t.position().top+parseInt(_.__fi.css("top"),10):_.__eK?t.offset().top+_.__eM.scrollTop()-_.__eK:t.offset().top,o=t.height();var f=t.find("tfoot"),r=0;return f.length&&(r=f.height()),_.__eR={min:i,max:i+o-_.__eS-r}}return _.__eR},render:function(){var _=this;_.__eP(),_.__fo(),_.__eU(),_.__eL(_.__fh)},__eU:function(){var _=this,e=_.__eO,t=_.__eN,i=e.height();i!=_.__eS&&("abs"==_.__fk&&e.css({marginTop:-i}),t.css("height",i),_.__eS=i)},__fo:function(){var _=this;_.__eO.width(_.__fl.width()-1);var e,t=_.__fm,i=_.__fn;t.length>0&&t.length==i.length&&(t.each(function(_,t){t=n(t);var o=(e=n(i[_])).attr("width");o?(e.removeAttr("width"),t.attr("width",o)):(o=e.attr("style"))&&(e.removeAttr("style"),t.attr("style",o))}),t.each(function(_,t){t=n(t),(e=n(i[_])).children("div").length||e.wrapInner("<div/>"),e.children("div").width(t.width())}))},__eL:function(_){var e=this;_||(_=e.__eM);var t=_.scrollTop(),i=e.__eT();if(t>i.min&&t<i.max){if("fixed"!=e.__fk){var n=e.__fh;e.__fk="fixed",e.__eO.css({position:"fixed",top:n&&n.length?0:e.__eK,marginTop:"auto"})}}else"abs"!=e.__fk&&(e.__fk="abs",e.__eO.css({marginTop:-e.__eS,position:"absolute",top:"auto"}))},"$win<resize>":function(){this.__fo(),this.__eU()},"$doc<htmlchanged,navslidend>":function(_){var e=this;(i.inside(_.node,e.id)||_.vId==e.owner.pId||"navslidend"==_.type)&&(clearTimeout(e.__fg),e.__fg=setTimeout(function(){e.__eP(),e.__fo(),e.__eU(),delete e.__eQ,e.__eL(e.__fh)},0))}})});
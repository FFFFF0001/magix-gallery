define("mx-table/sticky",["magix","$"],function(_,e,t){var i=_("magix"),n=_("$");t.exports=i.View.extend({init:function(_){var e=this;e.__eN=n("#header").height()||50;var t=n("#"+e.id).parents("_ca"),i=n("#inmain");t.length||i.length||(i=n(window),e.__eN=0);var o=t.parent(),f=function(){e.__eO(o)},r=function(){e.__eO(i)};e.on("destroy",function(){o.off("scroll",f),i.off("scroll",r)}),o.on("scroll",f),i.on("scroll",r),e.__fl=o,e.__fm=t,e.__eP=i,e.__fn=_.zIndex},__eS:function(){var _=this,e=n("#"+_.id).find("table"),t=e.find("thead"),i=t.find("tr").last(),o=e.find("tbody>tr").eq(0),f="ph_"+_.id,r=n("#"+f),s=i.find("th"),a=o.find("td");a.length&&a.length==s.length&&(r.length||(r=n("<caption />").insertBefore(t).attr("id",f)),t.css({marginLeft:-1,border:"1px solid "+e.css("border-top-color"),position:"absolute",background:"#fff",zIndex:_.__fn||1})),_.__fo="abs",_.__eQ=r,_.__h=e,_.__eR=t,_.__fp=o,_.__fq=a,_.__fr=s},__eW:function(){var _=this,e=n.now();if(!_.__eT||_.__eT+3e3<e){_.__eT=e;var t=_.__h,i=void 0,o=void 0;i=_.__fm.length?t.position().top+parseInt(_.__fm.css("top"),10):_.__eN?t.offset().top+_.__eP.scrollTop()-_.__eN:t.offset().top,o=t.height();var f=t.find("tfoot"),r=0;return f.length&&(r=f.height()),_.__eU={min:i,max:i+o-_.__eV-r}}return _.__eU},render:function(){var _=this;_.__eS(),_.__fs(),_.__eX(),_.__eO(_.__fl)},__eX:function(){var _=this,e=_.__eR,t=_.__eQ,i=e.height();i!=_.__eV&&("abs"==_.__fo&&e.css({marginTop:-i}),t.css("height",i),_.__eV=i)},__fs:function(){var _=this;_.__eR.width(_.__fp.width()-1);var e,t=_.__fq,i=_.__fr;t.length>0&&t.length==i.length&&(t.each(function(_,t){t=n(t);var o=(e=n(i[_])).attr("width");o?(e.removeAttr("width"),t.attr("width",o)):(o=e.attr("style"))&&(e.removeAttr("style"),t.attr("style",o))}),t.each(function(_,t){t=n(t),(e=n(i[_])).children("div").length||e.wrapInner("<div/>"),e.children("div").width(t.width())}))},__eO:function(_){var e=this;_||(_=e.__eP);var t=_.scrollTop(),i=e.__eW();if(t>i.min&&t<i.max){if("fixed"!=e.__fo){var n=e.__fl;e.__fo="fixed",e.__eR.css({position:"fixed",top:n&&n.length?0:e.__eN,marginTop:"auto"})}}else"abs"!=e.__fo&&(e.__fo="abs",e.__eR.css({marginTop:-e.__eV,position:"absolute",top:"auto"}))},"$win<resize>":function(){this.__fs(),this.__eX()},"$doc<htmlchanged,navslidend>":function(_){var e=this;(i.inside(_.node,e.id)||_.vId==e.owner.pId||"navslidend"==_.type)&&(clearTimeout(e.__fk),e.__fk=setTimeout(function(){e.__eS(),e.__fs(),e.__eX(),delete e.__eT,e.__eO(e.__fl)},0))}})});
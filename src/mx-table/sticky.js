define("mx-table/sticky",["magix","$"],(_,t,e)=>{let f=_("magix"),i=_("$");e.exports=f.View.extend({init(_){let t=this;t.__fa=i("#header").height()||50;let e=i("#"+t.id).parents("_cc"),f=i("#inmain");e.length||f.length||(f=i(window),t.__fa=0);let n=e.parent(),s=()=>{t.__fb(n)},l=()=>{t.__fb(f)};t.on("destroy",()=>{n.off("scroll",s),f.off("scroll",l)}),n.on("scroll",s),f.on("scroll",l),t.__fz=n,t.__fA=e,t.__fc=f,t.__fB=_.zIndex},__ff(){let _=this,t=i("#"+_.id).find("table"),e=t.find("thead"),f=e.find("tr").last(),n=t.find("tbody>tr").eq(0),s="ph_"+_.id,l=i("#"+s),o=f.find("th"),h=n.find("td");h.length&&h.length==o.length&&(l.length||(l=i("<caption />").insertBefore(e).attr("id",s)),e.css({marginLeft:-1,border:"1px solid "+t.css("border-top-color"),position:"absolute",background:"#fff",zIndex:_.__fB||1})),_.__fC="abs",_.__fd=l,_.__h=t,_.__fe=e,_.__fD=n,_.__fE=h,_.__fF=o},__fj(){let _=this,t=i.now();if(!_.__fg||_.__fg+3e3<t){_.__fg=t;let e,f,i=_.__h;e=_.__fA.length?i.position().top+parseInt(_.__fA.css("top"),10):_.__fa?i.offset().top+_.__fc.scrollTop()-_.__fa:i.offset().top,f=i.height();let n=i.find("tfoot"),s=0;return n.length&&(s=n.height()),_.__fh={min:e,max:e+f-_.__fi-s}}return _.__fh},render(){let _=this;_.__ff(),_.__fG(),_.__fk(),_.__fb(_.__fz)},__fk(){let _=this,t=_.__fe,e=_.__fd,f=t.height();f!=_.__fi&&("abs"==_.__fC&&t.css({marginTop:-f}),e.css("height",f),_.__fi=f)},__fG(){this.__fe.width(this.__fD.width()-1);let _,t=this.__fE,e=this.__fF;t.length>0&&t.length==e.length&&(t.each((t,f)=>{f=i(f);let n=(_=i(e[t])).attr("width");n?(_.removeAttr("width"),f.attr("width",n)):(n=_.attr("style"))&&(_.removeAttr("style"),f.attr("style",n))}),t.each((t,f)=>{f=i(f);(_=i(e[t])).children("div").length||_.wrapInner("<div/>"),_.children("div").width(f.width())}))},__fb(_){let t=this;_||(_=t.__fc);let e=_.scrollTop(),f=t.__fj();if(e>f.min&&e<f.max){if("fixed"!=t.__fC){let _=t.__fz;t.__fC="fixed",t.__fe.css({position:"fixed",top:_&&_.length?0:t.__fa,marginTop:"auto"})}}else"abs"!=t.__fC&&(t.__fC="abs",t.__fe.css({marginTop:-t.__fi,position:"absolute",top:"auto"}))},"$win<resize>"(){this.__fG(),this.__fk()},"$doc<htmlchanged,navslidend>"(_){let t=this;(f.inside(_.node,t.id)||_.vId==t.owner.pId||"navslidend"==_.type)&&(clearTimeout(t.__fy),t.__fy=setTimeout(()=>{t.__ff(),t.__fG(),t.__fk(),delete t.__fg,t.__fb(t.__fz)},0))}})});
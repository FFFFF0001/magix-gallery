define("mx-table/sticky",["magix","$"],function(_,t,e){var f=_("magix"),i=_("$");e.exports=f.View.extend({init:function(_){var t=this;t.__eX=i("#header").height()||50;var e=i("#"+t.id).parents("_cd"),f=i("#inmain");e.length||f.length||(f=i(window),t.__eX=0);var n=e.parent(),o=function(){t.__eY(n)},r=function(){t.__eY(f)};t.on("destroy",function(){n.off("scroll",o),f.off("scroll",r)}),n.on("scroll",o),f.on("scroll",r),t.__fv=n,t.__fw=e,t.__eZ=f,t.__fx=_.zIndex},__fb:function(){var _=this,t=i("#"+_.id).find("table"),e=t.find("thead"),f=e.find("tr").last(),n=t.find("tbody>tr").eq(0),o="ph_"+_.id,r=i("#"+o),a=f.find("th"),s=n.find("td");s.length&&s.length==a.length&&(r.length||(r=i("<caption />").insertBefore(e).attr("id",o)),e.css({marginLeft:-1,border:"1px solid "+t.css("border-top-color"),position:"absolute",background:"#fff",zIndex:_.__fx||1})),_.__fy="abs",_.__f_=r,_.__h=t,_.__fa=e,_.__fz=n,_.__fA=s,_.__fB=a},__ff:function(){var _=this,t=i.now();if(!_.__fc||_.__fc+3e3<t){_.__fc=t;var e=_.__h,f=void 0,n=void 0;f=_.__fw.length?e.position().top+parseInt(_.__fw.css("top"),10):_.__eX?e.offset().top+_.__eZ.scrollTop()-_.__eX:e.offset().top,n=e.height();var o=e.find("tfoot"),r=0;return o.length&&(r=o.height()),_.__fd={min:f,max:f+n-_.__fe-r}}return _.__fd},render:function(){var _=this;_.__fb(),_.__fC(),_.__fg(),_.__eY(_.__fv)},__fg:function(){var _=this,t=_.__fa,e=_.__f_,f=t.height();f!=_.__fe&&("abs"==_.__fy&&t.css({marginTop:-f}),e.css("height",f),_.__fe=f)},__fC:function(){var _=this;_.__fa.width(_.__fz.width()-1);var t,e=_.__fA,f=_.__fB;e.length>0&&e.length==f.length&&(e.each(function(_,e){e=i(e);var n=(t=i(f[_])).attr("width");n?(t.removeAttr("width"),e.attr("width",n)):(n=t.attr("style"))&&(t.removeAttr("style"),e.attr("style",n))}),e.each(function(_,e){e=i(e),(t=i(f[_])).children("div").length||t.wrapInner("<div/>"),t.children("div").width(e.width())}))},__eY:function(_){var t=this;_||(_=t.__eZ);var e=_.scrollTop(),f=t.__ff();if(e>f.min&&e<f.max){if("fixed"!=t.__fy){var i=t.__fv;t.__fy="fixed",t.__fa.css({position:"fixed",top:i&&i.length?0:t.__eX,marginTop:"auto"})}}else"abs"!=t.__fy&&(t.__fy="abs",t.__fa.css({marginTop:-t.__fe,position:"absolute",top:"auto"}))},"$win<resize>":function(){this.__fC(),this.__fg()},"$doc<htmlchanged,navslidend>":function(_){var t=this;(f.inside(_.node,t.id)||_.vId==t.owner.pId||"navslidend"==_.type)&&(clearTimeout(t.__fu),t.__fu=setTimeout(function(){t.__fb(),t.__fC(),t.__fg(),delete t.__fc,t.__eY(t.__fv)},0))}})});
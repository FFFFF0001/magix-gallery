define("mx-linkage/index",["magix","$","../mx-monitor/index"],function(e,t,i){var d=e("magix"),s=e("$"),r=e("../mx-monitor/index");d.applyStyle("v",".dM{height:32px;padding:0 9px;position:relative;border:1px solid #e6e6e6;border-radius:4px;width:340px;line-height:32px}.dM:hover{border-color:#ccc}.dN{cursor:not-allowed;background-color:#fbfbfb}.dN:hover{border-color:#e6e6e6}.dO{color:#999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dP{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;left:-1px;right:-1px}.dQ{border-bottom:1px solid #e6e6e6;margin:0 10px;padding-bottom:3px}.dR{cursor:pointer;display:inline-block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}.dR:active,.dR:focus,.dR:hover{color:#333;background-color:#f0f0f0}.dS{margin:0 10px;padding-top:3px}.dT{width:32%;float:left;margin:0 0 2px 2px;color:#666;display:block;cursor:pointer;padding:0 12px;height:29px;line-height:29px;border-radius:4px}.dT:active,.dT:focus,.dT:hover{color:#333;background-color:#f0f0f0}.dU{margin-left:-1px}.dV{float:left;height:24px;line-height:24px;padding:0 1px;max-width:31%;overflow:hidden;margin-top:3px}.dW{cursor:pointer;border-radius:4px}.dW:active,.dW:focus,.dW:hover{color:#333;background-color:#f0f0f0}.dN .dU{cursor:not-allowed}.dN .dW:active,.dN .dW:focus,.dN .dW:hover{background-color:transparent;cursor:not-allowed}.dX,.dX:active,.dX:focus,.dX:hover{color:#fff;background-color:#6363e6}");var a=function(e,t,i){t=t||"id",i=i||"pId";for(var s={},r={},a=[],c=0,l=e.length;c<l;c++){var o=d.mix({},e[c]);s[o[t]]=o,r[o[t]]&&(o.children=r[o[t]]),d.has(o,i)&&""!==o[i]?s[o[i]]?(s[o[i]].children||(s[o[i]].children=[])).push(o):r[o[i]]?r[o[i]].push(o):r[o[i]]=[o]:a.push(o)}return{list:a,map:s}};i.exports=d.View.extend({tmpl:{html:'<div mx-guid="g0" class="ah <%if($$.texts.length){%>dU ag<%}else{%>dO<%}%>" mx-click="__e()">1</div><div class="ah af dP" id="db_<%=$$.viewId%>"><div mx-guid="g2" class="dQ">3</div><div mx-guid="g3" class="dS">4</div></div>',subs:[{keys:["texts","placeholder"],path:'div[mx-guid="g0"]',tmpl:'<%if($$.texts.length){for(var a=0;a<$$.texts.length;a++){%><div class="dV aj dW" title="<%=$$.texts[a]%>" mx-click="__cI({i:<%!a%>})"><%=$$.texts[a]%></div><%if(a<$$.texts.length-1){%><div mx-guid="g1" class="dV">2</div><%}}}else{%> <%=$$.placeholder%> <%}%>',s:"1",attr:'class="ah <%if($$.texts.length){%>dU ag<%}else{%>dO<%}%>"',attrs:[{n:"class",p:1,f:"className"}],mask:"31"},{keys:["splitter"],path:'div[mx-guid="g1"]',pKeys:["texts","placeholder"],tmpl:"<%=$$.splitter%>",s:"2"},{keys:["headers","active"],path:'div[mx-guid="g2"]',tmpl:'<%for(var b=0;b<$$.headers.length;b++){var c=$$.headers[b]%><span title="<%=c%>" class="dR<%if(b==$$.active){%> dX<%}%>" <%if(b!==$$.active){%> mx-click="__cI({i:<%!b%>})" <%}%>><%=c%></span><%}%>',s:"3"},{keys:["list","selected","active","valueKey","textKey"],path:'div[mx-guid="g3"]',tmpl:"<%if($$.list&&$$.list.length){var d=$$.selected[$$.active]%><ul><%for(var e=0,f=$$.list;e<f.length;e++){var g=f[e];%><li class=\"dT aj<%if((g[$$.valueKey]+'')==(d+'')){%> dX<%}%>\" title=\"<%=g[$$.textKey]%>\" mx-click=\"__bP({o:'<%@g%>'})\"><%=g[$$.textKey]%></li><%}%></ul><%}%>",s:"4"}]},init:function(e){var t=this;t.assign(e),r.__d(),t.on("destroy",function(){r.__f(t),r.__g()})},assign:function(e){var t=this;t.__cy=e.placeholder;var i=e.valueKey||"id",s=e.parentKey||"pId",r=e.parentKey||"text",c=a(e.list,i,s);t.__cz=c,t.__cA=e.headers,t.__cB=0;var l=d.has(e,"selected")?e.selected:"";return l=l?(l+"").split(","):[],t.__as=l,t.__bH=e.disabled+""=="true",t.$u.set({splitter:e.splitter||"/",textKey:r,valueKey:i,selected:l}),!0},render:function(){var e=this;e.$u.digest({placeholder:e.__cy,headers:e.__cA,viewId:e.id,texts:e.__cC(),active:e.__cB,list:e.__cD()});var t=s("#"+e.id);t.addClass("dM"),t[e.__bH?"addClass":"removeClass"]("dN"),e.__h=t,e.__cE=s("#db_"+e.id)},__cC:function(){for(var e=this,t=[],i=e.__cz,d=e.__as,s=e.$u.get("textKey"),r=0,a=d;r<a.length;r++){var c=a[r];t.push(i.map[c][s])}return t},__cD:function(){var e=this,t=e.__cz,i=e.__as,d=e.__cB;if(0===d)return t.list;var s=i[d-1];return s?t.map[s].children:null},__cF:function(e){var t=this;t.$u.digest({active:t.__cB=e,list:t.__cD(),selected:t.__as})},__i:function(e){return d.inside(e,this.id)},__a:function(){var e=this;e.__j&&(e.__j=!1,r.__f(e),e.__cE.hide(),e.__cF(0))},__e:function(){var e=this;if(!e.__j){e.__j=!0,r.__k(e);var t=e.__h.position();e.__cE.show().css({left:t.left+e.__cG,top:e.__h.outerHeight()+5})}},__cH:function(){var e=this;e.$u.digest({placeholder:e.__cy,texts:e.__cC()})},"__e<click>":function(){var e=this;e.__h.hasClass("dN")||e.__e()},"__cI<click>":function(e){this.__cF(e.params.i)},"__bP<click>":function(e){var t=this,i=t.__cB,d=t.__cA,s=t.__as,r=t.$u.get("valueKey"),a=e.params.o[r];(s=s.slice(0,i)).push(a),i++;var c=t.__cz;t.__as=s,i<d.length&&c.map[a].children?t.__cF(i):(t.__cH(),t.__a(),t.__h.trigger({type:"change",selected:s}))}})});
define("mx-suggest/index",["magix","$","../mx-monitor/index"],function(e,_,t){var i=e("magix"),r=e("$"),s=e("../mx-monitor/index");i.applyStyle("_F","._eN{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;display:none;z-index:10;padding:3px 0;line-height:1.8}._eO{padding:0 4px;cursor:pointer;margin:2px 0}._eP{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._eQ,._eP:active,._eP:focus,._eP:hover{color:#333;background-color:#f0f0f0}._eQ{border-radius:4px;text-decoration:none;outline:0}"),t.exports=i.View.extend({tmpl:{html:'<ul mx-guid="g0" class="_eN _aj" style="width:<%=$$.width%>px" mx-mouseout="__eC()" mx-mousemove="__eD()" mx-contextmenu="__cb()">1</ul>',subs:[{keys:["width","rList","list","textKey","viewId"],path:'ul[mx-guid="g0"]',tmpl:'<%if($$.rList){for(var a=0,b;a<$$.list.length;a++){b=$$.list[a]%><li class="_eO" title="<%=$$.textKey?b[$$.textKey]:b%>"><a href="#" class="_eP _al" data-idx="<%!a%>" mx-click="__eB({item:\'<%@b%>\'})" id="sg_<%!$$.viewId%>_<%!a%>"><%=$$.textKey?b[$$.textKey]:b%></a></li><%}}%>',s:"1",attr:'style="width:<%=$$.width%>px"',attrs:[{n:"style"}],mask:"21111"}]},init:function(e){var _=this;_.__er=e.list||[],s.__e(),_.on("destroy",function(){s.__g(_),s.__h(),_.__i.off("keyup paste input",_.__es).off("focus",_.__et)}),_.updater.set({viewId:_.id,textKey:e.textKey,valueKey:e.valueKey}),_.__eu=-1},__j:function(e){return i.inside(e,this.id)||i.inside(e,"suggest_"+this.id)},update:function(e,_){var t=this;_||(t.__er=e),t.__eu=-1,t.updater.digest({list:t.__ev=e}),t.__dO&&(e&&e.length?t.__dO.addClass("_eN"):t.__dO.removeClass("_eN"))},render:function(){var e=this,_=r("#"+e.id);e.__i=_,_.on("focus",e.__et=r.proxy(e.show,e)).on("keyup paste input",e.__es=r.proxy(e.__ew,e));var t="suggest_"+e.id;r("<div />").attr("id",t).insertAfter(_),e.updater.to(t),e.updater.set({width:_.outerWidth()}),e.update(e.__er),e.__dO=r("#"+t+" ul"),e.__er&&e.__er.length||e.__dO.removeClass("_eN")},__ew:function(e){var _=this;_.__k||_.__f();var t=_.__ev;if(40==e.keyCode)_.__ex(),_.__eu++,_.__eu>=t.length&&(_.__eu=0),_.__ey();else if(38==e.keyCode)_.__ex(),_.__eu--,_.__eu<0&&(_.__eu=t.length-1),_.__ey();else if(13==e.keyCode){if(_.__eu>-1&&_.__eu<_.__ev.length){var i=_.__ev[_.__eu];_.__i.trigger({type:"pick",item:i});var s=_.updater.get("textKey");s&&(i=i[s]),_.__i.val(i).trigger("change"),_.__ew({target:_.__i[0]}),_.__ex(),_.__eu=-1,_.__a()}}else{var a=r.trim(e.target.value);if(a!=_.__ez)if(_.__ez=a,a){for(var o=[],d=_.__er.slice(),u=_.updater.get("textKey"),n=0,l=void 0;n<d.length;n++)l=d[n],((u?l[u]:l)+"").indexOf(a)>=0&&o.push(l);_.update(o,!0)}else _.update(_.__er,!0)}},__f:function(){var e=this,_=e.updater;if(!e.__k){e.__k=!0,_.get("rList")||_.digest({rList:!0}),s.__l(e);var t=e.__i.position();e.__dO.css({display:"block",left:t.left+e.$offsetLeft,top:t.top+e.__i.outerHeight()+5}),e.__i.trigger("showlist")}},__ex:function(){var e=this;r("#sg_"+e.id+"_"+e.__eu).removeClass("_eQ")},__ey:function(e){var _=this,t=r("#sg_"+_.id+"_"+_.__eu);if(t.addClass("_eQ"),!e&&t.length){_.__eA=1;var i=t.outerHeight(),s=(_.__eu+1)*i,a=_.__dO,o=a.height(),d=a.prop("scrollTop"),u=Math.ceil(o/i);s<d+i?a.prop("scrollTop",s-i):s>d+o&&a.prop("scrollTop",(_.__eu+2-u)*i)}},__a:function(){var e=this;e.__k&&(e.__k=!1,s.__g(e),e.__dO.hide(),e.__i.trigger("hidelist"))},"__eB<click>":function(e){e.preventDefault();var _=this,t=e.params.item;_.__i.trigger({type:"pick",item:t});var i=_.updater.get("textKey");i&&(t=t[i]),_.__i.val(t).trigger("change"),_.__ew({target:_.__i[0]}),_.__a()},"__eC<mouseout>":function(e){if(!i.inside(e.relatedTarget,e.eventTarget)){var _=this;_.__ex(),_.__eu=-1}},"__eD<mousemove>":function(e){var _=this;if(_.__eA)delete _.__eA;else{var t=r(e.target);if(t.is("li")){var i=t.data("idx");i!=_.__eu&&(_.__ex(),_.__eu=i,_.__ey(!0))}}},"__cb<contextmenu>":function(e){e.preventDefault()}})});